
<!DOCTYPE html>
<html lang="english">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://cloud-init.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Cloud-init Info Atom">


    <link rel="shortcut icon" href="/theme/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/theme/img/favicon.ico" type="image/x-icon">

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50554247-3', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#2c001e">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#2c001e">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#2c001e">

<meta name="author" content="chad.smith@canonical.com" />
<meta name="description" content="Meeting information #cloud-init: Cloud-init bi-weekly status, 10 Jun at 16:19 — 17:31 UTC Full logs at [[http://ubottu.com/meetingology/logs/cloud-init/2019/cloud-init.2019-06-10-16.19.log.html]] Meeting summary LINK: https://cloud-init.github.io Previous Actions The discussion about &#34;Previous Actions&#34; started at 16:23. Recent Changes The …" />
<meta name="keywords" content="">

<meta property="og:site_name" content="Cloud-init Info"/>
<meta property="og:title" content="Cloud-init bi-weekly status"/>
<meta property="og:description" content="Meeting information #cloud-init: Cloud-init bi-weekly status, 10 Jun at 16:19 — 17:31 UTC Full logs at [[http://ubottu.com/meetingology/logs/cloud-init/2019/cloud-init.2019-06-10-16.19.log.html]] Meeting summary LINK: https://cloud-init.github.io Previous Actions The discussion about &#34;Previous Actions&#34; started at 16:23. Recent Changes The …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://cloud-init.github.io/status-2019-06-10.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-06-10 16:19:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://cloud-init.github.io/author/chadsmithcanonicalcom.html">
<meta property="article:section" content="status-meeting-minutes"/>
<meta property="og:image" content="/images/cloud-init-orange.svg">

  <title>Cloud-init Info &ndash; Cloud-init bi-weekly status</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://cloud-init.github.io">
        <img src="/images/cloud-init-orange.svg" alt="Cloud-init" title="Cloud-init">
      </a>
      <h1><a href="https://cloud-init.github.io">Cloud-init</a></h1>

<p>Make your cloud images be all they can be</p>
      <nav>
        <ul class="list">

          <li><a href="https://cloudinit.readthedocs.org/" target="_blank">Docs</a></li>
          <li><a href="https://cloud-init.io" target="_blank">Overview</a></li>
          <li><a href="https://cloudinit.readthedocs.io/en/latest/topics/hacking.html" target="_blank">Hacking</a></li>
          <li><a href="https://jenkins.ubuntu.com/server/view/cloud-init/" target="_blank">CI builds</a></li>
          <li><a href="https://launchpad.net/cloud-init" target="_blank">Code</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/cloud-init" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-wechat" href="https://webchat.freenode.net/?channels=cloud-init" target="_blank"><i class="fa fa-wechat"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://cloud-init.github.io">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://cloud-init.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="status-2019-06-10">Cloud-init bi-weekly status</h1>
    <p>
      Posted on Mon 10 June 2019 in <a href="https://cloud-init.github.io/category/status-meeting-minutes.html">status-meeting-minutes</a>

        &#8226; 11 min read
    </p>
  </header>


  <div>
    <h2>Meeting information</h2>
<ul>
<li>#cloud-init: Cloud-init bi-weekly status, 10 Jun at 16:19 &mdash; 17:31 UTC</li>
<li>Full logs at [[<a href="http://ubottu.com/meetingology/logs/cloud-init/2019/cloud-init.2019-06-10-16.19.log.html">http://ubottu.com/meetingology/logs/cloud-init/2019/cloud-init.2019-06-10-16.19.log.html</a>]]</li>
</ul>
<h2>Meeting summary</h2>
<p><strong>LINK</strong>: <a href="https://cloud-init.github.io">https://cloud-init.github.io</a> </p>
<h3>Previous Actions</h3>
<p>The discussion about "Previous Actions" started at 16:23.</p>
<h3>Recent Changes</h3>
<p>The discussion about "Recent Changes" started at 16:24.</p>
<ul>
<li><strong>LINK</strong>: <a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin">https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</a> </li>
</ul>
<h3>In Progress Development</h3>
<p>The discussion about "In Progress Development" started at 16:30.</p>
<ul>
<li><strong>LINK</strong>: <a href="https://code.launchpad.net/cloud-init/+activereviews">https://code.launchpad.net/cloud-init/+activereviews</a> </li>
</ul>
<h3>Office Hours</h3>
<p>The discussion about "Office Hours" started at 16:45.</p>
<h3>Office Hours (next ~30 mins)</h3>
<p>The discussion about "Office Hours (next ~30 mins)" started at 16:48.</p>
<ul>
<li><strong>LINK</strong>: <a href="https://netplan.io/faq#how-to-go-back-to-ifupdown">https://netplan.io/faq#how-to-go-back-to-ifupdown</a> </li>
<li><strong>ACTION</strong>: follow up any bugs related to Azure/netplan uninstall in favor ifupdown to see if cloud-init has actionable feature work to ensure proper network renderer is used</li>
</ul>
<h2>Vote results</h2>
<h2>Done items</h2>
<ul>
<li>(none)</li>
</ul>
<h2>People present (lines said)</h2>
<ul>
<li>blackboxsw (39)</li>
<li>rharper (39)</li>
<li>AnhVoMSFT (29)</li>
<li>cyphermox (12)</li>
<li>robjo (6)</li>
<li>meetingology (4)</li>
<li>ubot5 (3)</li>
<li>paride (1)</li>
<li>Odd_Bloke (1)</li>
</ul>
<h2>Full Log</h2>
<p>16:19 <code>&lt;blackboxsw&gt;</code> #startmeeting Cloud-init bi-weekly status</p>
<p>16:19 <code>&lt;meetingology&gt;</code> Meeting started Mon Jun 10 16:19:45 2019 UTC.  The chair is blackboxsw. Information about MeetBot at <a href="http://wiki.ubuntu.com/meetingology.">http://wiki.ubuntu.com/meetingology.</a></p>
<p>16:19 <code>&lt;meetingology&gt;</code> </p>
<p>16:19 <code>&lt;meetingology&gt;</code> Available commands: action commands idea info link nick</p>
<p>16:19 <code>&lt;rharper&gt;</code> o/</p>
<p>16:20 <code>&lt;Odd_Bloke&gt;</code> o/</p>
<p>16:20 <code>&lt;blackboxsw&gt;</code> hi cloud-init folks. let's kick off the bi-weekly meeting again</p>
<p>16:21 <code>&lt;blackboxsw&gt;</code> our last meeting minutes are hosted on github</p>
<p>16:21 <code>&lt;blackboxsw&gt;</code> #link <a href="https://cloud-init.github.io">https://cloud-init.github.io</a></p>
<p>16:22 <code>&lt;blackboxsw&gt;</code> welcome all. Generally cloud-init upstream uses this meeting to provide a platform for status updates, raising questions or concerns and feature discussion. All are encouraged to participate as you see fit.</p>
<p>16:22 <code>&lt;blackboxsw&gt;</code> our format is the following topics: Previous Actions, Recent Changes, In-progress Development, Office Hours</p>
<p>16:23 <code>&lt;blackboxsw&gt;</code> interjections and additional topics are welcome</p>
<p>16:23 <code>&lt;blackboxsw&gt;</code> #topic Previous Actions</p>
<p>16:24 <code>&lt;blackboxsw&gt;</code> Checking last meeting's minutes  we were clear of old actions.</p>
<p>16:24 <code>&lt;blackboxsw&gt;</code> so we'll jump to the next topic this week.</p>
<p>16:24 <code>&lt;blackboxsw&gt;</code> #topic Recent Changes</p>
<p>16:26 <code>&lt;blackboxsw&gt;</code> the following commits landedd in cloud-init tip since the last status meeting</p>
<p>16:26 <code>&lt;blackboxsw&gt;</code> - Allow identification of OpenStack by Asset Tag</p>
<p>16:26 <code>&lt;blackboxsw&gt;</code> [Mark T. Voelker] (<a href="[https://bugs.launchpad.net/bugs/1669875](https://bugs.launchpad.net/bugs/1669875)">LP: #1669875</a>)</p>
<p>16:26 <code>&lt;blackboxsw&gt;</code> - Fix spelling error making 'an Ubuntu' consistent. [Brian Murray]</p>
<p>16:26 <code>&lt;blackboxsw&gt;</code> - run-container: centos: comment out the repo mirrorlist [Paride Legovini]</p>
<p>16:26 <code>&lt;blackboxsw&gt;</code> - netplan: update netplan key mappings for gratuitous-arp</p>
<p>16:26 <code>&lt;blackboxsw&gt;</code> [Ryan Harper] (<a href="[https://bugs.launchpad.net/bugs/1827238](https://bugs.launchpad.net/bugs/1827238)">LP: #1827238</a>)</p>
<p>16:26 <code>&lt;ubot5&gt;</code> Launchpad bug 1669875 in OpenStack Compute (nova) "identify openstack vmware platform" [Wishlist,Confirmed]</p>
<p>16:26 <code>&lt;ubot5&gt;</code> Launchpad bug 1827238 in cloud-init "Machines fail to deploy because cloud-init needs to accept both netplan spellings for grat arp" [Medium,Fix committed]</p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> I was poking around out trello board to see if we've moved other cloud-init related content into the done lane, but I think those commits about capture the recent work</p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> #link  <a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin">https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</a></p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> #topic In Progress Development</p>
<p>16:31 <code>&lt;blackboxsw&gt;</code> our active reviews are located here (as mentioned in the topic)</p>
<p>16:31 <code>&lt;blackboxsw&gt;</code> #link <a href="https://code.launchpad.net/cloud-init/+activereviews">https://code.launchpad.net/cloud-init/+activereviews</a></p>
<p>16:32 <code>&lt;blackboxsw&gt;</code> Goneri: thanks for all the work on freebsd branches, there has been some good momentum there</p>
<p>16:32 <code>&lt;blackboxsw&gt;</code> there is ongoing work from Azure datasource that will likely land in the next week or two</p>
<p>16:33 <code>&lt;paride&gt;</code> ^^ "run-container: centos: comment out the repo mirrorlist", only actually relevent when using an http/https proxy, in all the other cases the mirrorlist works as usual</p>
<p>16:33 <code>&lt;blackboxsw&gt;</code> and some network-related changes landing shortly</p>
<p>16:33 <code>&lt;blackboxsw&gt;</code> paride: thank you paride  for the extra note</p>
<p>16:33 <code>&lt;AnhVoMSFT&gt;</code> blackboxsw can you share more details on the work from Azure datasource ? Any bug that we can reference?</p>
<p>16:33 <code>&lt;blackboxsw&gt;</code> I was thinking <a href="https://code.launchpad.net/~jasonzio/cloud-init/+git/cloud-init/+merge/364012">https://code.launchpad.net/~jasonzio/cloud-init/+git/cloud-init/+merge/364012</a> AnhVoMSFT</p>
<p>16:35 <code>&lt;rharper&gt;</code> related to sorting out covering the all the network related scenarios so that we configure network in a way that ensures access to IMDS and internet in the face of  additional static ips on the same subnet as the primary interface, multiple dhcp interfaces with default routes,</p>
<p>16:35 <code>&lt;AnhVoMSFT&gt;</code> I see - I think there potentially needs some bigger change there, as there was some issue around identifying the primary/secondary NIC. We got confirmation from our netwoking team that the first NIC returned is the primary</p>
<p>16:35 <code>&lt;rharper&gt;</code> AnhVoMSFT: good to know; that was our observation</p>
<p>16:36 <code>&lt;rharper&gt;</code> AnhVoMSFT: <a href="https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1815254">https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1815254</a> , related  as well;  the plan being to put in place some source-based routing;</p>
<p>16:36 <code>&lt;ubot5&gt;</code> Launchpad bug 1815254 in cloud-init (Ubuntu) "Azure multiple ips prevent access to metadata service" [Undecided,Confirmed]</p>
<p>16:38 <code>&lt;AnhVoMSFT&gt;</code> thanks rharper - is that something that should be changed/fixed from cloudinit, or is this more platform related?</p>
<p>16:38 <code>&lt;rharper&gt;</code> that's a good question;  generally it would be <em>great</em> if a platform were to include source-routes and metrics in the config they send</p>
<p>16:38 <code>&lt;AnhVoMSFT&gt;</code> if the latter I will file a workitem on our side to go do some research and get the right team to take a look at it</p>
<p>16:39 <code>&lt;rharper&gt;</code> currently no cloud does this, rather <em>some</em> indicate a <em>primary</em> via metadata, and then the OS scripts apply a metric to all non-primary routes to ensure that default routes go to the primary</p>
<p>16:39 <code>&lt;AnhVoMSFT&gt;</code> I see - so I guess we can do similarly on Azure since we know what the primary is (first nic returned in IMDS)</p>
<p>16:40 <code>&lt;rharper&gt;</code> AnhVoMSFT: so in the short term, I think cloud-init should (where possible with the OS network config) provide additional tuning (likely post-scripts in some cases) to tune the routing for what cloud-init knows is the primary route</p>
<p>16:40 <code>&lt;rharper&gt;</code> AnhVoMSFT: yes, I prefer a primary=True or whatever, but it's good enough to have the current behavior documented (in the code)</p>
<p>16:40 <code>&lt;AnhVoMSFT&gt;</code> thanks rharper</p>
<p>16:40 <code>&lt;rharper&gt;</code> so if it change/breaks, then we know</p>
<p>16:44 <code>&lt;rharper&gt;</code> I think that covers our in-progress items for the moment</p>
<p>16:45 <code>&lt;rharper&gt;</code> not sure if the bot will listen to me, but just in case</p>
<p>16:45 <code>&lt;robjo&gt;</code> Be mindful that in Azure the metadata service may lag behind by minutes w.r.t. secondary IPs on an interface</p>
<p>16:45 <code>&lt;rharper&gt;</code> #topic Office Hours</p>
<p>16:45 <code>&lt;rharper&gt;</code> robjo: in general, my awareness is that the instance has to be off line to change vnets and such; and booting back up has been enough time to see IMDS updated, do you see differently ?</p>
<p>16:46 <code>&lt;AnhVoMSFT&gt;</code> robjo that is good to know, I will check on that</p>
<p>16:46 <code>&lt;robjo&gt;</code> We've had various issues with cloud-netconfig due to the metadata server in Azure being slow and reverted to polling, which of course got us in trouble with API rate limits</p>
<p>16:46 <code>&lt;rharper&gt;</code> robjo: interesting</p>
<p>16:47 <code>&lt;rharper&gt;</code> We'll here in channel so if youve;; got merges or bugs that need an eye or just questions, fire away</p>
<p>16:47 <code>&lt;AnhVoMSFT&gt;</code> robjo feel free to file a bug on that and we will investigate - IMDS is our partner team so we'll get some answer quickly there</p>
<p>16:48 <code>&lt;AnhVoMSFT&gt;</code> rharper, a couple things I want to ask for Office Hours</p>
<p>16:48 <code>&lt;robjo&gt;</code> AnhVoMSFT: We have been working with Stephen Zarkos on the issues</p>
<p>16:48 <code>&lt;blackboxsw&gt;</code> #topic Office Hours (next ~30 mins)</p>
<p>16:48 <code>&lt;AnhVoMSFT&gt;</code> robjo I will ping Stephen and get more detail and see if we have any follow up items</p>
<p>16:48 <code>&lt;blackboxsw&gt;</code> sorry folks got pulled away for a bit thx rharper</p>
<p>16:48 <code>&lt;robjo&gt;</code> And double checked that the polling direction was OK form the Microsoft perspective before we implemented that</p>
<p>16:49 <code>&lt;AnhVoMSFT&gt;</code> I see, glad you're not blocked on it</p>
<p>16:50 <code>&lt;robjo&gt;</code> rharper: We always had bug reports that upon reboot not everything was always configured when secondary IP addresses were in play. But theoretically yes upon reboot everything should be there</p>
<p>16:50 <code>&lt;AnhVoMSFT&gt;</code> rharper we have a customer who booted up a VM based on 18.04, which uses netplan. Cloudinit wrote a netplan file to the image. He then installed ifupdown, then had some networking change which triggered a mac address change. Upon rebooting, cloudinit tries to use eni, but netplan file was still there, which caused his VM to mess up the network config</p>
<p>16:50 <code>&lt;robjo&gt;</code> putting cloud-netconfig into polling mode pretty mush addresses the issues we had reports about</p>
<p>16:51 <code>&lt;rharper&gt;</code> AnhVoMSFT: yes; that sounds very likely</p>
<p>16:51 <code>&lt;rharper&gt;</code> AnhVoMSFT: did they file a bug?</p>
<p>16:51 <code>&lt;rharper&gt;</code> cloud-init net "detects" which service is present</p>
<p>16:51 <code>&lt;AnhVoMSFT&gt;</code> I'm checking to see if this should be a bug, or that is expected behavior</p>
<p>16:51 <code>&lt;rharper&gt;</code> so if they did not uninstall netplan.io then cloud-init will likely prefer that over eni</p>
<p>16:52 <code>&lt;AnhVoMSFT&gt;</code> cloudinit actually prefers eni if ifupdown is installed, I think</p>
<p>16:52 <code>&lt;rharper&gt;</code> AnhVoMSFT: so the etc/netplan/*.yaml would only trigger things if netplan is still present;  the systemd-generator will read yaml and write out networkd files</p>
<p>16:53 <code>&lt;AnhVoMSFT&gt;</code> right, I think the customer's mistake was to not uninstall netplan (or remove any netplan configuration file) after installing ifupdown</p>
<p>16:53 <code>&lt;rharper&gt;</code> AnhVoMSFT: right;  I think we'll need to see the log and system state, but it sounds like an incomplete uninstall of netplan</p>
<p>16:53 <code>&lt;rharper&gt;</code> uninstall of netplan should be enough to make the cloud-init.yaml inert</p>
<p>16:54 <code>&lt;rharper&gt;</code> <a href="https://netplan.io/faq#how-to-go-back-to-ifupdown">https://netplan.io/faq#how-to-go-back-to-ifupdown</a></p>
<p>16:54 <code>&lt;rharper&gt;</code> AnhVoMSFT: it <em>should</em> have automatically uninstall netplan.io</p>
<p>16:54 <code>&lt;AnhVoMSFT&gt;</code> I'm not sure if there is much we can do from the cloudinit side - perhaps if choosing eni, disable the cloud-init netplan yaml</p>
<p>16:54 <code>&lt;rharper&gt;</code> AnhVoMSFT: well, we could check writable paths of the renderers</p>
<p>16:54 <code>&lt;AnhVoMSFT&gt;</code> rharper I don't think that is the behavior on 18.04 - installing ifupdown will not uninstall netplan</p>
<p>16:55 <code>&lt;rharper&gt;</code> AnhVoMSFT: you're right; =(</p>
<p>16:55 <code>&lt;rharper&gt;</code> that sort of feels like a bug in the packaging</p>
<p>16:55 <code>&lt;AnhVoMSFT&gt;</code> yes, I share the same sentiment</p>
<p>16:56 <code>&lt;AnhVoMSFT&gt;</code> I will go ahead and file a bug so even if we don't have a short term action we can still capture the discussion</p>
<p>16:57 <code>&lt;rharper&gt;</code> AnhVoMSFT: thanks, I'm pinging in #netplan  and the bug will be great so we can figure out the right plan</p>
<p>16:59 <code>&lt;AnhVoMSFT&gt;</code> second question: We have an intern working in our team and as part of warming up in cloudinit he wrote some additional capabilities into cloud-init analyze, adding a "boot" module (in addition to show/blame/dump), which collects timestamps of phases happening during vm booting up, but before cloudinit started, such as kernel initialization, systemd initialization..</p>
<p>17:00 <code>&lt;AnhVoMSFT&gt;</code> this should work for all cloud (he tested in AWE/GCP). Currently only works for distros that uses systemd. He'll try to figure out how to get those counters for freebsd and others</p>
<p>17:00 <code>&lt;AnhVoMSFT&gt;</code> rharper since you were the original author of analyze, I'm trying to gauge the interest on this and we're open to suggestions/questions</p>
<p>17:01 <code>&lt;cyphermox&gt;</code> rharper: they can coexist and configure each their own interface, so it's not a conflict. It's no different than coexisting ifupdown and NetworkManager, or also NetworkManager and systemd-networkd</p>
<p>17:01 <code>&lt;rharper&gt;</code> AnhVoMSFT: that sounds excellent</p>
<p>17:01 <code>&lt;blackboxsw&gt;</code> nice AnhVoMSFT on the commandline extensions!</p>
<p>17:01 <code>&lt;rharper&gt;</code> AnhVoMSFT: happy to review  branch or Work-in-Progress when it's available</p>
<p>17:02 <code>&lt;AnhVoMSFT&gt;</code> thanks rharper blackboxsw we will have that in a branch very soon.</p>
<p>17:03 <code>&lt;AnhVoMSFT&gt;</code> cyphermox if that is the case then either the customer or cloudinit needs to make sure the system does not have conflicting configuration for netplan/eni.</p>
<p>17:03 <code>&lt;rharper&gt;</code> cyphermox: ok;  would you be open to some sort of warning about having config in both or something? I dunno; it's just not a great experience to add the new package, configure it, reboot and not have networking since the same interface was configured (differenlty) in both packages</p>
<p>17:03 <code>&lt;blackboxsw&gt;</code> yeah, I'm quite intterested in any additional cli functionality that cloud-init more versatile as a system debug tool</p>
<p>17:04 <code>&lt;blackboxsw&gt;</code> <em>makes cloud-init more versatile</em></p>
<p>17:04 <code>&lt;cyphermox&gt;</code> rharper: I'm not opposed to a warning, but that's not necessarily better UX.</p>
<p>17:05 <code>&lt;cyphermox&gt;</code> debconf prompts are quite annoying to have at upgrade, and just writing it out people are likely to miss it altogether</p>
<p>17:05 <code>&lt;cyphermox&gt;</code> (so you wouldn't really gain much)</p>
<p>17:05 <code>&lt;AnhVoMSFT&gt;</code> blackboxsw yep that was the goal - we want to be able to deploy 1000 VMs, then use cloud-init analyze output to analyze the 50th/99th percentile of where the timing was spent during system boot, and we need some more insights into phases before cloud-init started as well</p>
<p>17:05 <code>&lt;rharper&gt;</code> cyphermox: agreed; having a pointer to suggest cleaning/checking/confirming configs if /etc/netplan/ is non-empty and netplan.io is installed</p>
<p>17:06 <code>&lt;cyphermox&gt;</code> rharper: one option is to parse enough of /etc/network/ to catch mentions of the interface, but that's not necessarily super solid (though it's the best option), because people can rename interfaces in netplan and match by mac</p>
<p>17:06 <code>&lt;rharper&gt;</code> might be helpful; though I agree that they may still ignore that; and cloud-init could do some more work to see if an image has multiple renderers available and ensure it didn't leave config for a previous boot around</p>
<p>17:07 <code>&lt;rharper&gt;</code> cyphermox: yeah; cloud-init knows more about the config and both formats; we're likely in a better spot to see "you've configured this interface twice"</p>
<p>17:08 <code>&lt;cyphermox&gt;</code> rharper: so in short, I'm not opposed to improving the UX, but I'm not wowed by any solution right now (even mine)</p>
<p>17:09 <code>&lt;rharper&gt;</code> cyphermox: that's fair; thanks</p>
<p>17:09 <code>&lt;AnhVoMSFT&gt;</code> i think a fix in cloudinit might make most stakeholders happy here. It knows which configuration file it wrote, so it can definitely look for conflicting configurations</p>
<p>17:09 <code>&lt;rharper&gt;</code> cyphermox: AnhVoMSFT is going to file the customer bug with details and we can discuss what (if any) improvements are to be made;  I suspect cloud-init can help most here</p>
<p>17:09 <code>&lt;cyphermox&gt;</code> yes, I think so too</p>
<p>17:09 <code>&lt;rharper&gt;</code> cyphermox: thanks for the input</p>
<p>17:09 <code>&lt;AnhVoMSFT&gt;</code> it can't be responsible for everything the customer does though. If customer writes some my-own-netplan.yml, we can't help much</p>
<p>17:10 <code>&lt;cyphermox&gt;</code> rharper: but hey, if someone was to write a check when running netplan apply that there exists config in /etc/network, I wouldn't have much issues merging it</p>
<p>17:10 <code>&lt;rharper&gt;</code> AnhVoMSFT: right, we have several "maybe_delete_if" where we verify expected output before we remove things</p>
<p>17:10 <code>&lt;cyphermox&gt;</code> I just know I won't have time to look into this myself in the near future</p>
<p>17:10 <code>&lt;rharper&gt;</code> cyphermox: ack</p>
<p>17:11 <code>&lt;cyphermox&gt;</code> I think what will help most is aggressively deprecating and removing ifupdown</p>
<p>17:13 <code>&lt;cyphermox&gt;</code> that said, the best we can realistically do for the time being is to demote it to universe</p>
<p>17:13 <code>&lt;cyphermox&gt;</code> (and that's not going to change anything for UX)</p>
<p>17:15 <code>&lt;AnhVoMSFT&gt;</code> we had another instance of someone installing ifupdown2, which had the effect of removing cloud-init on debian/ubuntu 16.04</p>
<p>17:16 <code>&lt;AnhVoMSFT&gt;</code> and totally hosed his system, but that's a different issue altogether</p>
<p>17:26 <code>&lt;blackboxsw&gt;</code> s</p>
<p>17:27 <code>&lt;blackboxsw&gt;</code> thanks for the good discussion folks, I guess we'll just add an action item to followup on a netplan bug for next time to see where we are at</p>
<p>17:31 <code>&lt;blackboxsw&gt;</code> #action follow up any bugs related to Azure/netplan uninstall in favor ifupdown to see if cloud-init has actionable feature work to ensure proper network renderer is used</p>
<p>17:31 * meetingology follow up any bugs related to Azure/netplan uninstall in favor ifupdown to see if cloud-init has actionable feature work to ensure proper network renderer is used</p>
<p>17:31 <code>&lt;blackboxsw&gt;</code> ok, I'll post minutes on this. thank you again rharper for driving</p>
<p>17:31 <code>&lt;blackboxsw&gt;</code> and for the participation robjo cyphermox and AnhVoMSFT</p>
<p>17:31 <code>&lt;blackboxsw&gt;</code> #endmeeting</p>
<p>Generated by MeetBot 0.1.5 (<a href="http://wiki.ubuntu.com/meetingology">http://wiki.ubuntu.com/meetingology</a>)</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>



    <div class="addthis_relatedposts_inline">


</article>

    <footer>
<p>&copy;  </p>
<p>Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Cloud-init Info ",
  "url" : "https://cloud-init.github.io",
  "image": "/images/cloud-init-orange.svg",
  "description": "Cloud-init project updates and general information"
}
</script>

</body>
</html>