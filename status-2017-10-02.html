
<!DOCTYPE html>
<html lang="english">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://cloud-init.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Cloud-init Info Atom">


    <link rel="shortcut icon" href="/theme/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/theme/img/favicon.ico" type="image/x-icon">

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50554247-3', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#2c001e">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#2c001e">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#2c001e">

<meta name="author" content="chad.smith@canonical.com" />
<meta name="description" content="Meeting information #cloud-init: cloud-init, 02 Oct at 16:05 — 17:29 UTC Full logs at [[http://ubottu.com/meetingology/logs/cloud-init/2017/cloud-init.2017-10-02-16.05.log.html]] Meeting summary Recent Changes / Highlights The discussion about &#34;Recent Changes / Highlights&#34; started at 16:06. LINK: https://lists.launchpad.net/cloud-init/msg00106.html …" />
<meta name="keywords" content="">

<meta property="og:site_name" content="Cloud-init Info"/>
<meta property="og:title" content="Cloud-init bi-weekly status"/>
<meta property="og:description" content="Meeting information #cloud-init: cloud-init, 02 Oct at 16:05 — 17:29 UTC Full logs at [[http://ubottu.com/meetingology/logs/cloud-init/2017/cloud-init.2017-10-02-16.05.log.html]] Meeting summary Recent Changes / Highlights The discussion about &#34;Recent Changes / Highlights&#34; started at 16:06. LINK: https://lists.launchpad.net/cloud-init/msg00106.html …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://cloud-init.github.io/status-2017-10-02.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-10-02 16:05:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://cloud-init.github.io/author/chadsmithcanonicalcom.html">
<meta property="article:section" content="status-meeting-minutes"/>
<meta property="og:image" content="/images/cloud-init-orange.svg">

  <title>Cloud-init Info &ndash; Cloud-init bi-weekly status</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://cloud-init.github.io">
        <img src="/images/cloud-init-orange.svg" alt="Cloud-init" title="Cloud-init">
      </a>
      <h1><a href="https://cloud-init.github.io">Cloud-init</a></h1>

<p>Make your cloud images be all they can be</p>
      <nav>
        <ul class="list">

          <li><a href="https://cloudinit.readthedocs.org/" target="_blank">Docs</a></li>
          <li><a href="https://cloud-init.io" target="_blank">Overview</a></li>
          <li><a href="https://cloudinit.readthedocs.io/en/latest/topics/hacking.html" target="_blank">Hacking</a></li>
          <li><a href="https://jenkins.ubuntu.com/server/view/cloud-init/" target="_blank">CI builds</a></li>
          <li><a href="https://launchpad.net/cloud-init" target="_blank">Code</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/cloud-init" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-wechat" href="https://webchat.freenode.net/?channels=cloud-init" target="_blank"><i class="fa fa-wechat"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://cloud-init.github.io">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://cloud-init.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="status-2017-10-02">Cloud-init bi-weekly status</h1>
    <p>
      Posted on Mon 02 October 2017 in <a href="https://cloud-init.github.io/category/status-meeting-minutes.html">status-meeting-minutes</a>

        &#8226; 10 min read
    </p>
  </header>


  <div>
    <h2>Meeting information</h2>
<ul>
<li>#cloud-init: cloud-init, 02 Oct at 16:05 &mdash; 17:29 UTC</li>
<li>Full logs at [[<a href="http://ubottu.com/meetingology/logs/cloud-init/2017/cloud-init.2017-10-02-16.05.log.html">http://ubottu.com/meetingology/logs/cloud-init/2017/cloud-init.2017-10-02-16.05.log.html</a>]]</li>
</ul>
<h2>Meeting summary</h2>
<h3>Recent Changes / Highlights</h3>
<p>The discussion about "Recent Changes / Highlights" started at 16:06.</p>
<ul>
<li><strong>LINK</strong>: <a href="https://lists.launchpad.net/cloud-init/msg00106.html">https://lists.launchpad.net/cloud-init/msg00106.html</a> </li>
<li><strong>LINK</strong>: <a href="https://launchpad.net/cloud-init/+milestone/17.2">https://launchpad.net/cloud-init/+milestone/17.2</a> </li>
<li>please target bugs to the next release</li>
</ul>
<h3>In Progress Development / Highlights</h3>
<p>The discussion about "In Progress Development / Highlights" started at 16:09.</p>
<ul>
<li><strong>LINK</strong>: <a href="http://bit.ly/ci-reviews">http://bit.ly/ci-reviews</a> </li>
<li><strong>LINK</strong>: ? </li>
<li><strong>LINK</strong>: <a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin">https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</a> </li>
<li><strong>LINK</strong>: <a href="https://code.launchpad.net/~rjschwei/cloud-init/+git/cloud-init/+ref/taskLimit">https://code.launchpad.net/~rjschwei/cloud-init/+git/cloud-init/+ref/taskLimit</a> that's the branch for the task limit</li>
<li><strong>LINK</strong>: <a href="https://bugs.launchpad.net/cloud-init">https://bugs.launchpad.net/cloud-init</a> </li>
<li><strong>LINK</strong>: <a href="http://bit.ly/ci-reviews">http://bit.ly/ci-reviews</a> </li>
</ul>
<h3>Open Discussion / Office Hours</h3>
<p>The discussion about "Open Discussion / Office Hours" started at 16:17.</p>
<ul>
<li><strong>LINK</strong>: <a href="http://paste.ubuntu.com/25661692/">http://paste.ubuntu.com/25661692/</a> </li>
<li><strong>LINK</strong>: <a href="http://paste.ubuntu.com/25661714/">http://paste.ubuntu.com/25661714/</a> </li>
<li><strong>LINK</strong>: <a href="https://bugs.launchpad.net/cloud-init/+bug/1720841">https://bugs.launchpad.net/cloud-init/+bug/1720841</a> </li>
<li><strong>LINK</strong>: <a href="https://bugs.launchpad.net/cloud-init/+bug/1720841">https://bugs.launchpad.net/cloud-init/+bug/1720841</a> </li>
<li><strong>LINK</strong>: <a href="https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525">https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525</a> ;-)</li>
</ul>
<h2>Vote results</h2>
<h2>Done items</h2>
<ul>
<li>(none)</li>
</ul>
<h2>People present (lines said)</h2>
<ul>
<li>smoser (88)</li>
<li>ajorg (51)</li>
<li>rharper (28)</li>
<li>blackboxsw (25)</li>
<li>robjo (4)</li>
<li>ubot5 (3)</li>
<li>meetingology (3)</li>
</ul>
<h2>Full Log</h2>
<p>16:05 <code>&lt;smoser</code>&gt; #startmeeting cloud-init</p>
<p>16:05 <code>&lt;meetingology</code>&gt; Meeting started Mon Oct  2 16:05:47 2017 UTC.  The chair is smoser. Information about MeetBot at <a href="http://wiki.ubuntu.com/meetingology.">http://wiki.ubuntu.com/meetingology.</a></p>
<p>16:05 <code>&lt;meetingology</code>&gt; </p>
<p>16:05 <code>&lt;meetingology</code>&gt; Available commands: action commands idea info link nick</p>
<p>16:06 <code>&lt;smoser</code>&gt; #topic Recent Changes / Highlights</p>
<p>16:06 <code>&lt;smoser</code>&gt; hm..</p>
<p>16:06 <code>&lt;smoser</code>&gt; 17.1 released <a href="https://lists.launchpad.net/cloud-init/msg00106.html">https://lists.launchpad.net/cloud-init/msg00106.html</a></p>
<p>16:06 <code>&lt;smoser</code>&gt; thats the biggest thing and only thing i have for this topic</p>
<p>16:06 <code>&lt;blackboxsw</code>&gt; #link  <a href="https://lists.launchpad.net/cloud-init/msg00106.html">https://lists.launchpad.net/cloud-init/msg00106.html</a></p>
<p>16:06 <code>&lt;smoser</code>&gt; horay for a release, thanks to those who contributed.</p>
<p>16:07 <code>&lt;rharper</code>&gt; \o/</p>
<p>16:07 <code>&lt;smoser</code>&gt; 17.2 is set for 2017-12-14</p>
<p>16:08 <code>&lt;smoser</code>&gt; <a href="https://launchpad.net/cloud-init/+milestone/17.2">https://launchpad.net/cloud-init/+milestone/17.2</a></p>
<p>16:08 <code>&lt;ajorg</code>&gt; yay!</p>
<p>16:08 <code>&lt;smoser</code>&gt; feel free to target bugs to that release.</p>
<p>16:08 <code>&lt;rharper</code>&gt; #link <a href="https://launchpad.net/cloud-init/+milestone/17.2">https://launchpad.net/cloud-init/+milestone/17.2</a></p>
<p>16:08 <code>&lt;rharper</code>&gt; #info please target bugs to the next release</p>
<p>16:09 <code>&lt;smoser</code>&gt; does that do anyting ?</p>
<p>16:09 <code>&lt;rharper</code>&gt; in the meeting summary, it does</p>
<p>16:09 <code>&lt;blackboxsw</code>&gt; smoser: the links showed up in meeting minutes last time</p>
<p>16:09 <code>&lt;smoser</code>&gt; k. i always expected the bot to tell me that in a pm</p>
<p>16:09 <code>&lt;blackboxsw</code>&gt; meetingology didn't echo though</p>
<p>16:09 <code>&lt;rharper</code>&gt; well, smoser may have to do those</p>
<p>16:09 <code>&lt;smoser</code>&gt; #topic In Progress Development / Highlights</p>
<p>16:09 <code>&lt;blackboxsw</code>&gt; same. but something is up that needs attention.</p>
<p>16:10 <code>&lt;blackboxsw</code>&gt; I'll properly handle it when publishing</p>
<p>16:10 <code>&lt;rharper</code>&gt; cool</p>
<p>16:11 <code>&lt;smoser</code>&gt; Merge Proposals</p>
<p>16:11 <code>&lt;smoser</code>&gt; #link <a href="http://bit.ly/ci-reviews">http://bit.ly/ci-reviews</a></p>
<p>16:11 <code>&lt;smoser</code>&gt; there are some there for sure. i know that robjo has some he's interested in, and i think ajorg's instance-identity deserves a look</p>
<p>16:12 <code>&lt;smoser</code>&gt; as well as simpletable for 17.2</p>
<p>16:12 <code>&lt;ajorg</code>&gt; I'd be grateful for both, yes.</p>
<p>16:12 <code>&lt;smoser</code>&gt; i am looking at the 'networkd' one which is a blocker as currently Ubuntu does not work properly on azure</p>
<p>16:12 <code>&lt;blackboxsw</code>&gt; we should have more bandwidth this week</p>
<p>16:12 <code>&lt;smoser</code>&gt; and all sysstemd-networkd systems will not work properly on CloudStack.</p>
<p>16:12 <code>&lt;smoser</code>&gt; anything else there?</p>
<p>16:13 <code>&lt;robjo</code>&gt; The task limit increase has been tested and solves our problem, thus merging would be great</p>
<p>16:13 <code>&lt;smoser</code>&gt; robjo, yeah. athat does seem unlikely to cause issue</p>
<p>16:13 <code>&lt;smoser</code>&gt; Trello Board</p>
<p>16:13 <code>&lt;smoser</code>&gt; # <a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin">https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</a></p>
<p>16:13 <code>&lt;rharper</code>&gt; #link  ?</p>
<p>16:13 <code>&lt;smoser</code>&gt; #link <a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin">https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</a></p>
<p>16:14 <code>&lt;robjo</code>&gt; <a href="https://code.launchpad.net/~rjschwei/cloud-init/+git/cloud-init/+ref/taskLimit">https://code.launchpad.net/~rjschwei/cloud-init/+git/cloud-init/+ref/taskLimit</a> that's the branch for the task limit</p>
<p>16:15 <code>&lt;robjo</code>&gt; Sorry, I can never find the link for the open merge proposals :( problem exists between the keyboard and the chair</p>
<p>16:16 <code>&lt;blackboxsw</code>&gt; will get eyes on that today robjo as your addZypper is about wrapped</p>
<p>16:16 <code>&lt;smoser</code>&gt; Bugs</p>
<p>16:16 <code>&lt;smoser</code>&gt; #link <a href="https://bugs.launchpad.net/cloud-init">https://bugs.launchpad.net/cloud-init</a></p>
<p>16:16 <code>&lt;smoser</code>&gt; just mostly pointers... above.</p>
<p>16:16 <code>&lt;smoser</code>&gt; for Ubuntu in 16.04, there is one SRU in progress that blackboxsw and i need to verify today</p>
<p>16:16 <code>&lt;smoser</code>&gt; and then we will be soon looking at doing an SRU of 17.1-ish</p>
<p>16:17 <code>&lt;robjo</code>&gt; Thanks, still in europe, my day is about done, will pick it up tomorrow</p>
<p>16:17 <code>&lt;smoser</code>&gt; robjo, link is in topic</p>
<p>16:17 <code>&lt;smoser</code>&gt; <a href="http://bit.ly/ci-reviews">http://bit.ly/ci-reviews</a></p>
<p>16:17 <code>&lt;smoser</code>&gt; ok. so open discussion i guess. no w?</p>
<p>16:17 <code>&lt;smoser</code>&gt; #topic Open Discussion / Office Hours</p>
<p>16:17 <code>&lt;smoser</code>&gt; we'll hang around and pay attention to pings and discussion fro the next 30  minutes or so.</p>
<p>16:18 <code>&lt;smoser</code>&gt; and after that, feel free to ping.</p>
<p>16:19 <code>&lt;ajorg</code>&gt; I'm writing a unit test for a bugfix I'm preparing to submit. It works, but it's slow because readurl retries and waits a second each time</p>
<p>16:20 <code>&lt;ajorg</code>&gt; I'm a bit of a mock / patch newb. Anyone can help me see how to patch that argument?</p>
<p>16:20 <code>&lt;smoser</code>&gt; you can feel free to  mock readurl</p>
<p>16:20 <code>&lt;smoser</code>&gt; and set its return_value and look at calls</p>
<p>16:21 <code>&lt;smoser</code>&gt; then you dont have to httppretty.</p>
<p>16:21 <code>&lt;ajorg</code>&gt; The only thing I want to change about it is the sleep though. Is there a straightforward way to just change one arg?</p>
<p>16:21 <code>&lt;blackboxsw</code>&gt; tests/unittests/test_handler/test_handler_chef.py is an example and tests/unittests/test_datasource/test_maas.py</p>
<p>16:21 <code>&lt;blackboxsw</code>&gt; I think</p>
<p>16:21 <code>&lt;ajorg</code>&gt; Hmm, I could do that, yeah. Would be sufficient for this.</p>
<p>16:22 <code>&lt;ajorg</code>&gt; I'd still like to know if there's an easy way to just change one argument to something that gets called somewhere else.</p>
<p>16:22 <code>&lt;smoser</code>&gt; you could also mock the time.sleep from url_helper</p>
<p>16:22 <code>&lt;ajorg</code>&gt; hahaha, yes. that's what I need to do.</p>
<p>16:22 <code>&lt;rharper</code>&gt; ajorg: if you want to mock the sleep you can decorate the test_ method with @mock.patch(time.sleep)</p>
<p>16:22 <code>&lt;smoser</code>&gt; we're suggesting other ways generally because there isn't :) at least that i know of.</p>
<p>16:23 <code>&lt;ajorg</code>&gt; that's cool, patching time.sleep will do nicely</p>
<p>16:24 <code>&lt;ajorg</code>&gt; is there an integration test that looks at what lands on the console?</p>
<p>16:24 <code>&lt;ajorg</code>&gt; (going back to my question from before the meeting)</p>
<p>16:25 <code>&lt;smoser</code>&gt; no. there coudl be on the nocloud-kvm backend</p>
<p>16:25 <code>&lt;smoser</code>&gt; but i think there is no console access currently on lxd</p>
<p>16:25 <code>&lt;smoser</code>&gt; and i think that we do not collect console access on nocloud-kvm</p>
<p>16:25 <code>&lt;smoser</code>&gt; but as you suggest we should for sure</p>
<p>16:25 <code>&lt;ajorg</code>&gt; k</p>
<p>16:26 <code>&lt;ajorg</code>&gt; I wondered if systemd might be swallowing my output, or maybe python (boothook in this case is a python script) is making a strange choice when it sets up logging.</p>
<p>16:27 <code>&lt;rharper</code>&gt; certainly possible;  I know there were issues with cloud-init starting before say rsyslog on non-systemd boots</p>
<p>16:28 <code>&lt;rharper</code>&gt; and the python logging has changed w.r.t the default configuration;  cloud-init main sort of expects this transition as it starts up in init-local and it has not yet read the cloud-config for logging configuration yet, so it reads that and then does some replay</p>
<p>16:28 <code>&lt;ajorg</code>&gt; interesting</p>
<p>16:29 <code>&lt;smoser</code>&gt; ajorg, you're writing to stdout/err with logging from a boothook ?</p>
<p>16:29 <code>&lt;ajorg</code>&gt; at least I would have thought cloud-init-output.log would contain my logs though, since it's more a redirect of stderr and stdout, right?</p>
<p>16:29 <code>&lt;ajorg</code>&gt; yeah</p>
<p>16:29 <code>&lt;rharper</code>&gt; correct</p>
<p>16:29 <code>&lt;rharper</code>&gt; this is from a bootcmd ?</p>
<p>16:29 <code>&lt;ajorg</code>&gt; no, #cloud-boothook</p>
<p>16:29 * rharper hasn't used boothook</p>
<p>16:29 <code>&lt;smoser</code>&gt; hm..</p>
<p>16:30 <code>&lt;ajorg</code>&gt; boothooks are super useful</p>
<p>16:32 <code>&lt;rharper</code>&gt; smoser: when do boot_hooks run ?  local ?  net ?</p>
<p>16:33 <code>&lt;rharper</code>&gt; I'm not sure yet where stdout/err for boot hooks occur, but you can dump each from the units via:  journalctl -u cloud-init-local.service   (or cloud-init.service)</p>
<p>16:33 <code>&lt;blackboxsw</code>&gt; "This is the earliest hook available. Note, that there is no mechanism provided for running only once"</p>
<p>16:34 <code>&lt;blackboxsw</code>&gt; I'm checking the code now (local/pre-local maybe)?</p>
<p>16:34 <code>&lt;rharper</code>&gt; yeah, saw that;  it runs in-image scripts programs</p>
<p>16:34 <code>&lt;ajorg</code>&gt; I did that too, and don't see anything.</p>
<p>16:34 <code>&lt;ajorg</code>&gt; (journalctl)</p>
<p>16:34 <code>&lt;rharper</code>&gt; you should see some output</p>
<p>16:34 <code>&lt;rharper</code>&gt; but not seeing your hook in there ?</p>
<p>16:34 <code>&lt;ajorg</code>&gt; I can tell by other means that the hook ran</p>
<p>16:34 <code>&lt;ajorg</code>&gt; just don't see that it printed anything</p>
<p>16:35 <code>&lt;ajorg</code>&gt; my prime suspect if systemd can't do something bad here is that python makes some decision about not actually logging.</p>
<p>16:35 <code>&lt;ajorg</code>&gt; and I need to be more explicit that it should log</p>
<p>16:36 <code>&lt;rharper</code>&gt; so, the boot_hook will sub out each part, I see no capture on the stderr/stdout ; so I would expect those to go to whatever is currently capturing those;</p>
<p>16:37 <code>&lt;rharper</code>&gt; s/sub/subprocess</p>
<p>16:38 <code>&lt;ajorg</code>&gt; yup, that's what I expect too, and what I recall seeing on Amazon Linux</p>
<p>16:38 <code>&lt;rharper</code>&gt; since it's using cloud-init's util.subp, there <em>should</em> be a debug level message saying 'Running command %s with allowed return codes %s' which maches a path to the boothook</p>
<p>16:38 <code>&lt;rharper</code>&gt; I would expect to see that in the cloud-init.log</p>
<p>16:39 <code>&lt;smoser</code>&gt; <a href="http://paste.ubuntu.com/25661692/">http://paste.ubuntu.com/25661692/</a></p>
<p>16:39 <code>&lt;ajorg</code>&gt; yup, I do see that</p>
<p>16:39 <code>&lt;rharper</code>&gt; the output of script, I <em>think</em> should go to cloud-init-output.log</p>
<p>16:39 <code>&lt;smoser</code>&gt; i'm testing ^ on serverstack now.</p>
<p>16:39 <code>&lt;smoser</code>&gt; i verified the commands run on lxd but not look at console there.</p>
<p>16:39 <code>&lt;ajorg</code>&gt; thanks</p>
<p>16:40 <code>&lt;smoser</code>&gt; actually.. yeah, BOOTHOOK does run, but doesnt seem to have stdout tied to same place as bootcmd</p>
<p>16:41 <code>&lt;ajorg</code>&gt; oh?</p>
<p>16:41 <code>&lt;ajorg</code>&gt; I'm slightly surprised it's not just me</p>
<p>16:42 <code>&lt;smoser</code>&gt; <a href="http://paste.ubuntu.com/25661714/">http://paste.ubuntu.com/25661714/</a></p>
<p>16:42 <code>&lt;rharper</code>&gt; it really should be in the journal/console if stdout is not redirected to a file, cloud-init-local service</p>
<p>16:43 <code>&lt;smoser</code>&gt; that reproduces in lxc</p>
<p>16:44 <code>&lt;rharper</code>&gt; smoser: in your  instance on serverstack, do you see your BOOTHOOK in journalctl -b -u cloud-init-local.service ?</p>
<p>16:44 <code>&lt;smoser</code>&gt; ajorg, please go ahead and open a bug.</p>
<p>16:44 <code>&lt;ajorg</code>&gt; cool (not cool :-P)</p>
<p>16:44 <code>&lt;ajorg</code>&gt; will do</p>
<p>16:44 <code>&lt;smoser</code>&gt; # journalctl -b -u cloud-init.service | grep BOOT</p>
<p>16:44 <code>&lt;smoser</code>&gt; Oct 02 16:37:41 a5 cloud-init[121]: BOOTCMD: Mon, 02 Oct 2017 16:37:41 +0000: a5</p>
<p>16:44 <code>&lt;smoser</code>&gt; ^ that is from lxd</p>
<p>16:45 <code>&lt;rharper</code>&gt; and what about the welcome message from cloud-init ?</p>
<p>16:45 <code>&lt;smoser</code>&gt; i think not.</p>
<p>16:45 <code>&lt;rharper</code>&gt; bootcmd does:  util.subp(cmd, env=env, capture=False) ; where boot_hook does: util.subp([filepath], env=env)</p>
<p>16:46 <code>&lt;smoser</code>&gt; yeah, so boot_hook definitely swallowed. and should not be.</p>
<p>16:47 <code>&lt;rharper</code>&gt; yeah</p>
<p>16:49 <code>&lt;ajorg</code>&gt; <a href="https://bugs.launchpad.net/cloud-init/+bug/1720841">https://bugs.launchpad.net/cloud-init/+bug/1720841</a></p>
<p>16:49 <code>&lt;ubot5</code>&gt; Ubuntu bug 1720841 in cloud-init "Output from boothook is not logged" [Undecided,New]</p>
<p>16:50 <code>&lt;ajorg</code>&gt; Meanwhile I need to setup more explicit logging from that boothook anyway, so I'm okay.</p>
<p>16:51 <code>&lt;blackboxsw</code>&gt; #link <a href="https://bugs.launchpad.net/cloud-init/+bug/1720841">https://bugs.launchpad.net/cloud-init/+bug/1720841</a></p>
<p>16:51 <code>&lt;ubot5</code>&gt; Ubuntu bug 1720841 in cloud-init "Output from boothook is not logged" [Medium,Confirmed]</p>
<p>16:55 <code>&lt;ajorg</code>&gt; Here's another one, which I've confirmed with a unit test and proposed a patch: <a href="https://bugs.launchpad.net/cloud-init/+bug/1720844">https://bugs.launchpad.net/cloud-init/+bug/1720844</a></p>
<p>16:55 <code>&lt;ubot5</code>&gt; Ubuntu bug 1720844 in cloud-init "UrlError from #include aborts stage" [Undecided,New]</p>
<p>16:55 <code>&lt;ajorg</code>&gt; (what is this #link thing you're doing there?)</p>
<p>16:55 <code>&lt;smoser</code>&gt; well, the bot is supposed to care and do somethign with it.</p>
<p>16:56 <code>&lt;smoser</code>&gt; but /me thinks it doesnt work right :)</p>
<p>16:56 <code>&lt;blackboxsw</code>&gt; ajorg: since meetingology is still active, the theory is it is keeping track of links  during this meeting</p>
<p>16:56 <code>&lt;smoser</code>&gt; (during the meeting)</p>
<p>16:56 <code>&lt;ajorg</code>&gt; ah, okay</p>
<p>16:57 <code>&lt;ajorg</code>&gt; I think simpletable is completely ready to merge, btw. Any objections? <a href="https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525">https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525</a></p>
<p>16:57 <code>&lt;blackboxsw</code>&gt; The theory is it writes the meeting notes out for us so we can publish to <a href="https://cloud-init.github.io">https://cloud-init.github.io</a></p>
<p>16:57 <code>&lt;ajorg</code>&gt; #link <a href="https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525">https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525</a> ;-)</p>
<p>16:57 <code>&lt;blackboxsw</code>&gt; geg</p>
<p>16:57 <code>&lt;blackboxsw</code>&gt; heh</p>
<p>16:58 <code>&lt;blackboxsw</code>&gt; ajorg: I think we were good on that changeset, and we only wanted to wait post 17.1 cut to avoid potential regression</p>
<p>16:59 <code>&lt;ajorg</code>&gt; great</p>
<p>16:59 <code>&lt;blackboxsw</code>&gt; I'm +1 on that will give it a spin today and then I think we can land it</p>
<p>17:01 <code>&lt;smoser</code>&gt; blackboxsw, ajorg my thoughts on the simpletable...</p>
<p>17:01 <code>&lt;ajorg</code>&gt; here it comes...</p>
<p>17:01 <code>&lt;ajorg</code>&gt; :-P</p>
<p>17:01 <code>&lt;blackboxsw</code>&gt; :)</p>
<p>17:02 <code>&lt;smoser</code>&gt; i would like to have a machine friendly output available</p>
<p>17:02 <code>&lt;smoser</code>&gt; human friendly is good, but machine friendly solves the actual goal of writing the stuff.</p>
<p>17:02 <code>&lt;ajorg</code>&gt; So I modified it to display <em>exactly</em> as prettytable did</p>
<p>17:02 <code>&lt;smoser</code>&gt; oh really.</p>
<p>17:02 <code>&lt;smoser</code>&gt; wow</p>
<p>17:02 <code>&lt;ajorg</code>&gt; which is admittedly not machine friendly</p>
<p>17:02 <code>&lt;ajorg</code>&gt; not especially</p>
<p>17:02 <code>&lt;smoser</code>&gt; then i guess i can't object at all.</p>
<p>17:02 <code>&lt;ajorg</code>&gt; but it's at least as good as prettytable</p>
<p>17:03 <code>&lt;smoser</code>&gt; in that its backwards compat</p>
<p>17:03 <code>&lt;smoser</code>&gt; right.</p>
<p>17:03 <code>&lt;ajorg</code>&gt; ^ this was my goal, to get you to not object</p>
<p>17:03 <code>&lt;smoser</code>&gt; i still think we should probaly additionally write some machine friendly json</p>
<p>17:03 <code>&lt;ajorg</code>&gt; agreed, that would be better</p>
<p>17:03 <code>&lt;smoser</code>&gt; i tihnk having something human friendly is good though</p>
<p>17:03 <code>&lt;smoser</code>&gt; as i know <em>I</em> look at that output</p>
<p>17:04 <code>&lt;ajorg</code>&gt; it meets my goal of not depending on prettytable</p>
<p>17:04 <code>&lt;smoser</code>&gt; and parsing json would be less nice</p>
<p>17:04 <code>&lt;smoser</code>&gt; yeah</p>
<p>17:05 <code>&lt;smoser</code>&gt; so based on your assertion that it outputs the same as pretty table, i have no objections. only future hopes.</p>
<p>17:05 <code>&lt;smoser</code>&gt; and i do agree dropping pretty table is nice</p>
<p>17:05 <code>&lt;ajorg</code>&gt; winning</p>
<p>17:06 <code>&lt;blackboxsw</code>&gt; smoser: yeah I was wondering how we generally expect people/machines to parse cloud-init-output.log. Right now it's kindof hard to do machine parsing of cloud-init-output.log.</p>
<p>17:07 <code>&lt;smoser</code>&gt; blackboxsw, yeah. cloud-init-output.log is not intended to be machine friendly.</p>
<p>17:07 <code>&lt;blackboxsw</code>&gt; do we know already of non-human consumers of the formatting in cloud-init.output.log?</p>
<p>17:07 <code>&lt;smoser</code>&gt; but the console actually has value in having machien friendly things on it.</p>
<p>17:08 <code>&lt;smoser</code>&gt; my feeling is if you have access to /var/log/cloud-init.log, then you could very easily have written whatever you wanted to another file that was purely machine friendly.</p>
<p>17:08 <code>&lt;blackboxsw</code>&gt; was wondering where we would intend to dump machine-friendly json</p>
<p>17:08 <code>&lt;blackboxsw</code>&gt; yeah</p>
<p>17:08 <code>&lt;smoser</code>&gt; but the console (/dev/ttyS0) boot log is different</p>
<p>17:08 <code>&lt;smoser</code>&gt; in that it can give you a couple things you'd not find easy access to</p>
<p>17:09 <code>&lt;smoser</code>&gt; a.) ssh public keys for the system (providing out of band communication of this data)</p>
<p>17:09 <code>&lt;smoser</code>&gt; b.) network configuration info: providn useful bits of data on how you might get to this system</p>
<p>17:10 <code>&lt;smoser</code>&gt; systemd makes it "fun" to get that data to the console in a safe way</p>
<p>17:12 <code>&lt;ajorg</code>&gt; ugh yes. systemd like to stomp all over your consoles.</p>
<p>17:19 <code>&lt;blackboxsw</code>&gt; ok so did we want to iterate on simpletable to dump json, or just look for cloud-init to write supplementary json files under /run/cloud-init</p>
<p>17:20 <code>&lt;blackboxsw</code>&gt; .. after we land ajorg's branch</p>
<p>17:21 <code>&lt;ajorg</code>&gt; I think it's a good idea to dump json fragments to console for some things, but I suspect smoser will still not want to break anyone who might be using the tables, so probably best to land my branch as-is</p>
<p>17:23 <code>&lt;smoser</code>&gt; yeah, i agree with ajorg. for now, we can just take a replacement that drops prettytable</p>
<p>17:23 <code>&lt;smoser</code>&gt; there are improvments to be done there, but this is a simple win</p>
<p>17:29 <code>&lt;smoser</code>&gt; we'll go ahead and end meeting here.</p>
<p>17:29 <code>&lt;smoser</code>&gt; i'll still be around. thanks all!</p>
<p>17:29 <code>&lt;smoser</code>&gt; #endmeeting</p>
<p>Generated by MeetBot 0.1.5 (<a href="http://wiki.ubuntu.com/meetingology">http://wiki.ubuntu.com/meetingology</a>)</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>



    <div class="addthis_relatedposts_inline">


</article>

    <footer>
<p>&copy;  </p>
<p>Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Cloud-init Info ",
  "url" : "https://cloud-init.github.io",
  "image": "/images/cloud-init-orange.svg",
  "description": "Cloud-init project updates and general information"
}
</script>

</body>
</html>