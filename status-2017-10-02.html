
<!DOCTYPE html>
<html lang="english">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://cloud-init.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Cloud-init Info Atom">


    <link rel="shortcut icon" href="/theme/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/theme/img/favicon.ico" type="image/x-icon">

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50554247-3', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#2c001e">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#2c001e">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#2c001e">

<meta name="author" content="chad.smith@canonical.com" />
<meta name="description" content="Meeting information * #cloud-init: cloud-init, 02 Oct at 16:05 — 17:29 UTC\ * Full logs athttp://ubottu.com/meetingology/logs/cloud-init/2017/cloud-init.2017-10-02-16.05.log.html Meeting summary Recent Changes / Highlights The discussion about “Recent Changes / Highlights” started at 16:06. *LINK:https://lists.launchpad.net/cloud-init/msg00106.html …" />
<meta name="keywords" content="">

<meta property="og:site_name" content="Cloud-init Info"/>
<meta property="og:title" content="Cloud-init bi-weekly status"/>
<meta property="og:description" content="Meeting information * #cloud-init: cloud-init, 02 Oct at 16:05 — 17:29 UTC\ * Full logs athttp://ubottu.com/meetingology/logs/cloud-init/2017/cloud-init.2017-10-02-16.05.log.html Meeting summary Recent Changes / Highlights The discussion about “Recent Changes / Highlights” started at 16:06. *LINK:https://lists.launchpad.net/cloud-init/msg00106.html …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://cloud-init.github.io/status-2017-10-02.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-10-02 16:05:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://cloud-init.github.io/author/chadsmithcanonicalcom.html">
<meta property="article:section" content="status-meeting-minutes"/>
<meta property="og:image" content="/images/cloud-init-orange.svg">

  <title>Cloud-init Info &ndash; Cloud-init bi-weekly status</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://cloud-init.github.io">
        <img src="/images/cloud-init-orange.svg" alt="Cloud-init" title="Cloud-init">
      </a>
      <h1><a href="https://cloud-init.github.io">Cloud-init</a></h1>

<p>Make your cloud images be all they can be</p>
      <nav>
        <ul class="list">

          <li><a href="https://cloudinit.readthedocs.org/" target="_blank">Docs</a></li>
          <li><a href="https://cloud-init.io" target="_blank">Overview</a></li>
          <li><a href="https://cloudinit.readthedocs.io/en/latest/topics/hacking.html" target="_blank">Hacking</a></li>
          <li><a href="https://jenkins.ubuntu.com/server/view/cloud-init/" target="_blank">CI builds</a></li>
          <li><a href="https://launchpad.net/cloud-init" target="_blank">Code</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/cloud-init" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-wechat" href="https://webchat.freenode.net/?channels=cloud-init" target="_blank"><i class="fa fa-wechat"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://cloud-init.github.io">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://cloud-init.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="status-2017-10-02">Cloud-init bi-weekly status</h1>
    <p>
      Posted on Mon 02 October 2017 in <a href="https://cloud-init.github.io/category/status-meeting-minutes.html">status-meeting-minutes</a>

        &#8226; 8 min read
    </p>
  </header>


  <div>
    <h2>Meeting information</h2>
<p><code>* #cloud-init: cloud-init, 02 Oct at 16:05 — 17:29 UTC</code>\
<code>* Full logs at</code><a href="http://ubottu.com/meetingology/logs/cloud-init/2017/cloud-init.2017-10-02-16.05.log.html" title="wikilink"><code>http://ubottu.com/meetingology/logs/cloud-init/2017/cloud-init.2017-10-02-16.05.log.html</code></a></p>
<h2>Meeting summary</h2>
<h3>Recent Changes / Highlights</h3>
<p>The discussion about “Recent Changes / Highlights” started at 16:06.</p>
<p><code>*</code><em><code>LINK:</code></em><code></code><a href="https://lists.launchpad.net/cloud-init/msg00106.html"><code>https://lists.launchpad.net/cloud-init/msg00106.html</code></a><code></code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="https://launchpad.net/cloud-init/+milestone/17.2"><code>https://launchpad.net/cloud-init/+milestone/17.2</code></a><code></code>\
<code>* please target bugs to the next release</code></p>
<h3>In Progress Development / Highlights</h3>
<p>The discussion about “In Progress Development / Highlights” started at
16:09.</p>
<p><code>*</code><em><code>LINK:</code></em><code></code><a href="http://bit.ly/ci-reviews"><code>http://bit.ly/ci-reviews</code></a><code></code>\
<code>*</code><em><code>LINK:</code></em><code>?</code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin"><code>https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</code></a><code></code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="https://code.launchpad.net/~rjschwei/cloud-init/+git/cloud-init/+ref/taskLimit"><code>https://code.launchpad.net/~rjschwei/cloud-init/+git/cloud-init/+ref/taskLimit</code></a><code>that's the branch for the task limit</code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="https://bugs.launchpad.net/cloud-init"><code>https://bugs.launchpad.net/cloud-init</code></a><code></code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="http://bit.ly/ci-reviews"><code>http://bit.ly/ci-reviews</code></a><code></code></p>
<h3>Open Discussion / Office Hours</h3>
<p>The discussion about “Open Discussion / Office Hours” started at 16:17.</p>
<p><code>*</code><em><code>LINK:</code></em><code></code><a href="http://paste.ubuntu.com/25661692/"><code>http://paste.ubuntu.com/25661692/</code></a><code></code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="http://paste.ubuntu.com/25661714/"><code>http://paste.ubuntu.com/25661714/</code></a><code></code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="https://bugs.launchpad.net/cloud-init/+bug/1720841"><code>https://bugs.launchpad.net/cloud-init/+bug/1720841</code></a><code></code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="https://bugs.launchpad.net/cloud-init/+bug/1720841"><code>https://bugs.launchpad.net/cloud-init/+bug/1720841</code></a><code></code>\
<code>*</code><em><code>LINK:</code></em><code></code><a href="https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525"><code>https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525</code></a><code>;-)</code></p>
<h2>Vote results</h2>
<h2>Done items</h2>
<p><code>* (none)</code></p>
<h2>People present (lines said)</h2>
<p><code>* smoser (88)</code>\
<code>* ajorg (51)</code>\
<code>* rharper (28)</code>\
<code>* blackboxsw (25)</code>\
<code>* robjo (4)</code>\
<code>* ubot5 (3)</code>\
<code>* meetingology (3)</code></p>
<h2>Full Log</h2>
<p><code>16:05</code><smoser><code>#startmeeting cloud-init</code></p>
<p><code>16:05</code><meetingology><code>Meeting started Mon Oct  2 16:05:47 2017 UTC.  The chair is smoser. Information about MeetBot at</code><a href="http://wiki.ubuntu.com/meetingology"><code>http://wiki.ubuntu.com/meetingology</code></a><code>.</code></p>
<p><code>16:05</code><meetingology><code></code></p>
<p><code>16:05</code><meetingology><code>Available commands: action commands idea info link nick</code></p>
<p><code>16:06</code><smoser><code>#topic Recent Changes / Highlights</code></p>
<p><code>16:06</code><smoser><code>hm..</code></p>
<p><code>16:06</code><smoser><code>17.1 released</code><a href="https://lists.launchpad.net/cloud-init/msg00106.html"><code>https://lists.launchpad.net/cloud-init/msg00106.html</code></a></p>
<p><code>16:06</code><smoser><code>thats the biggest thing and only thing i have for this topic</code></p>
<p><code>16:06</code><blackboxsw><code>#link</code><a href="https://lists.launchpad.net/cloud-init/msg00106.html"><code>https://lists.launchpad.net/cloud-init/msg00106.html</code></a></p>
<p><code>16:06</code><smoser><code>horay for a release, thanks to those who contributed.</code></p>
<p><code>16:07</code><rharper><code>\o/</code></p>
<p><code>16:07</code><smoser><code>17.2 is set for 2017-12-14</code></p>
<p><code>16:08</code><smoser><code></code><a href="https://launchpad.net/cloud-init/+milestone/17.2"><code>https://launchpad.net/cloud-init/+milestone/17.2</code></a></p>
<p><code>16:08</code><ajorg><code>yay!</code></p>
<p><code>16:08</code><smoser><code>feel free to target bugs to that release.</code></p>
<p><code>16:08</code><rharper><code>#link</code><a href="https://launchpad.net/cloud-init/+milestone/17.2"><code>https://launchpad.net/cloud-init/+milestone/17.2</code></a></p>
<p><code>16:08</code><rharper><code>#info please target bugs to the next release</code></p>
<p><code>16:09</code><smoser><code>does that do anyting ?</code></p>
<p><code>16:09</code><rharper><code>in the meeting summary, it does</code></p>
<p><code>16:09</code><blackboxsw><code>smoser: the links showed up in meeting minutes last time</code></p>
<p><code>16:09</code><smoser><code>k. i always expected the bot to tell me that in a pm</code></p>
<p><code>16:09</code><blackboxsw><code>meetingology didn't echo though</code></p>
<p><code>16:09</code><rharper><code>well, smoser may have to do those</code></p>
<p><code>16:09</code><smoser><code>#topic In Progress Development / Highlights</code></p>
<p><code>16:09</code><blackboxsw><code>same. but something is up that needs attention.</code></p>
<p><code>16:10</code><blackboxsw><code>I'll properly handle it when publishing</code></p>
<p><code>16:10</code><rharper><code>cool</code></p>
<p><code>16:11</code><smoser><code>Merge Proposals</code></p>
<p><code>16:11</code><smoser><code>#link</code><a href="http://bit.ly/ci-reviews"><code>http://bit.ly/ci-reviews</code></a></p>
<p><code>16:11</code><smoser><code>there are some there for sure. i know that robjo has some he's interested in, and i think ajorg's instance-identity deserves a look</code></p>
<p><code>16:12</code><smoser><code>as well as simpletable for 17.2</code></p>
<p><code>16:12</code><ajorg><code>I'd be grateful for both, yes.</code></p>
<p><code>16:12</code><smoser><code>i am looking at the 'networkd' one which is a blocker as currently Ubuntu does not work properly on azure</code></p>
<p><code>16:12</code><blackboxsw><code>we should have more bandwidth this week</code></p>
<p><code>16:12</code><smoser><code>and all sysstemd-networkd systems will not work properly on CloudStack.</code></p>
<p><code>16:12</code><smoser><code>anything else there?</code></p>
<p><code>16:13</code><robjo><code>The task limit increase has been tested and solves our problem, thus merging would be great</code></p>
<p><code>16:13</code><smoser><code>robjo, yeah. athat does seem unlikely to cause issue</code></p>
<p><code>16:13</code><smoser><code>Trello Board</code></p>
<p><code>16:13</code><smoser><code>#</code><a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin"><code>https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</code></a></p>
<p><code>16:13</code><rharper><code>#link  ?</code></p>
<p><code>16:13</code><smoser><code>#link</code><a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin"><code>https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</code></a></p>
<p><code>16:14</code><robjo><code></code><a href="https://code.launchpad.net/~rjschwei/cloud-init/+git/cloud-init/+ref/taskLimit"><code>https://code.launchpad.net/~rjschwei/cloud-init/+git/cloud-init/+ref/taskLimit</code></a><code>that's the branch for the task limit</code></p>
<p><code>16:15</code><robjo><code>Sorry, I can never find the link for the open merge proposals :( problem exists between the keyboard and the chair</code></p>
<p><code>16:16</code><blackboxsw><code>will get eyes on that today robjo as your addZypper is about wrapped</code></p>
<p><code>16:16</code><smoser><code>Bugs</code></p>
<p><code>16:16</code><smoser><code>#link</code><a href="https://bugs.launchpad.net/cloud-init"><code>https://bugs.launchpad.net/cloud-init</code></a></p>
<p><code>16:16</code><smoser><code>just mostly pointers... above.</code></p>
<p><code>16:16</code><smoser><code>for Ubuntu in 16.04, there is one SRU in progress that blackboxsw and i need to verify today</code></p>
<p><code>16:16</code><smoser><code>and then we will be soon looking at doing an SRU of 17.1-ish</code></p>
<p><code>16:17</code><robjo><code>Thanks, still in europe, my day is about done, will pick it up tomorrow</code></p>
<p><code>16:17</code><smoser><code>robjo, link is in topic</code></p>
<p><code>16:17</code><smoser><code></code><a href="http://bit.ly/ci-reviews"><code>http://bit.ly/ci-reviews</code></a></p>
<p><code>16:17</code><smoser><code>ok. so open discussion i guess. no w?</code></p>
<p><code>16:17</code><smoser><code>#topic Open Discussion / Office Hours</code></p>
<p><code>16:17</code><smoser><code>we'll hang around and pay attention to pings and discussion fro the next 30  minutes or so.</code></p>
<p><code>16:18</code><smoser><code>and after that, feel free to ping.</code></p>
<p><code>16:19</code><ajorg><code>I'm writing a unit test for a bugfix I'm preparing to submit. It works, but it's slow because readurl retries and waits a second each time</code></p>
<p><code>16:20</code><ajorg><code>I'm a bit of a mock / patch newb. Anyone can help me see how to patch that argument?</code></p>
<p><code>16:20</code><smoser><code>you can feel free to  mock readurl</code></p>
<p><code>16:20</code><smoser><code>and set its return_value and look at calls</code></p>
<p><code>16:21</code><smoser><code>then you dont have to httppretty.</code></p>
<p><code>16:21</code><ajorg><code>The only thing I want to change about it is the sleep though. Is there a straightforward way to just change one arg?</code></p>
<p><code>16:21</code><blackboxsw><code>tests/unittests/test_handler/test_handler_chef.py is an example and tests/unittests/test_datasource/test_maas.py</code></p>
<p><code>16:21</code><blackboxsw><code>I think</code></p>
<p><code>16:21</code><ajorg><code>Hmm, I could do that, yeah. Would be sufficient for this.</code></p>
<p><code>16:22</code><ajorg><code>I'd still like to know if there's an easy way to just change one argument to something that gets called somewhere else.</code></p>
<p><code>16:22</code><smoser><code>you could also mock the time.sleep from url_helper</code></p>
<p><code>16:22</code><ajorg><code>hahaha, yes. that's what I need to do.</code></p>
<p><code>16:22</code><rharper><code>ajorg: if you want to mock the sleep you can decorate the test_ method with @mock.patch(time.sleep)</code></p>
<p><code>16:22</code><smoser><code>we're suggesting other ways generally because there isn't :) at least that i know of.</code></p>
<p><code>16:23</code><ajorg><code>that's cool, patching time.sleep will do nicely</code></p>
<p><code>16:24</code><ajorg><code>is there an integration test that looks at what lands on the console?</code></p>
<p><code>16:24</code><ajorg><code>(going back to my question from before the meeting)</code></p>
<p><code>16:25</code><smoser><code>no. there coudl be on the nocloud-kvm backend</code></p>
<p><code>16:25</code><smoser><code>but i think there is no console access currently on lxd</code></p>
<p><code>16:25</code><smoser><code>and i think that we do not collect console access on nocloud-kvm</code></p>
<p><code>16:25</code><smoser><code>but as you suggest we should for sure</code></p>
<p><code>16:25</code><ajorg><code>k</code></p>
<p><code>16:26</code><ajorg><code>I wondered if systemd might be swallowing my output, or maybe python (boothook in this case is a python script) is making a strange choice when it sets up logging.</code></p>
<p><code>16:27</code><rharper><code>certainly possible;  I know there were issues with cloud-init starting before say rsyslog on non-systemd boots</code></p>
<p><code>16:28</code><rharper><code>and the python logging has changed w.r.t the default configuration;  cloud-init main sort of expects this transition as it starts up in init-local and it has not yet read the cloud-config for logging configuration yet, so it reads that and then does some replay</code></p>
<p><code>16:28</code><ajorg><code>interesting</code></p>
<p><code>16:29</code><smoser><code>ajorg, you're writing to stdout/err with logging from a boothook ?</code></p>
<p><code>16:29</code><ajorg><code>at least I would have thought cloud-init-output.log would contain my logs though, since it's more a redirect of stderr and stdout, right?</code></p>
<p><code>16:29</code><ajorg><code>yeah</code></p>
<p><code>16:29</code><rharper><code>correct</code></p>
<p><code>16:29</code><rharper><code>this is from a bootcmd ?</code></p>
<p><code>16:29</code><ajorg><code>no, #cloud-boothook</code></p>
<p><code>16:29 * rharper hasn't used boothook</code></p>
<p><code>16:29</code><smoser><code>hm..</code></p>
<p><code>16:30</code><ajorg><code>boothooks are super useful</code></p>
<p><code>16:32</code><rharper><code>smoser: when do boot_hooks run ?  local ?  net ?</code></p>
<p><code>16:33</code><rharper><code>I'm not sure yet where stdout/err for boot hooks occur, but you can dump each from the units via:  journalctl -u cloud-init-local.service   (or cloud-init.service)</code></p>
<p><code>16:33</code><blackboxsw><code></code>“<code>This`` ``is`` ``the`` ``earliest`` ``hook`` ``available.`` ``Note,`` ``that`` ``there`` ``is`` ``no`` ``mechanism`` ``provided`` ``for`` ``running`` ``only`` ``once</code>”</p>
<p><code>16:34</code><blackboxsw><code>I'm checking the code now (local/pre-local maybe)?</code></p>
<p><code>16:34</code><rharper><code>yeah, saw that;  it runs in-image scripts programs</code></p>
<p><code>16:34</code><ajorg><code>I did that too, and don't see anything.</code></p>
<p><code>16:34</code><ajorg><code>(journalctl)</code></p>
<p><code>16:34</code><rharper><code>you should see some output</code></p>
<p><code>16:34</code><rharper><code>but not seeing your hook in there ?</code></p>
<p><code>16:34</code><ajorg><code>I can tell by other means that the hook ran</code></p>
<p><code>16:34</code><ajorg><code>just don't see that it printed anything</code></p>
<p><code>16:35</code><ajorg><code>my prime suspect if systemd can't do something bad here is that python makes some decision about not actually logging.</code></p>
<p><code>16:35</code><ajorg><code>and I need to be more explicit that it should log</code></p>
<p><code>16:36</code><rharper><code>so, the boot_hook will sub out each part, I see no capture on the stderr/stdout ; so I would expect those to go to whatever is currently capturing those;</code></p>
<p><code>16:37</code><rharper><code>s/sub/subprocess</code></p>
<p><code>16:38</code><ajorg><code>yup, that's what I expect too, and what I recall seeing on Amazon Linux</code></p>
<p><code>16:38</code><rharper><code>since it's using cloud-init's util.subp, there *should* be a debug level message saying 'Running command %s with allowed return codes %s' which maches a path to the boothook</code></p>
<p><code>16:38</code><rharper><code>I would expect to see that in the cloud-init.log</code></p>
<p><code>16:39</code><smoser><code></code><a href="http://paste.ubuntu.com/25661692/"><code>http://paste.ubuntu.com/25661692/</code></a></p>
<p><code>16:39</code><ajorg><code>yup, I do see that</code></p>
<p><code>16:39</code><rharper><code>the output of script, I *think* should go to cloud-init-output.log</code></p>
<p><code>16:39</code><smoser><code>i'm testing ^ on serverstack now.</code></p>
<p><code>16:39</code><smoser><code>i verified the commands run on lxd but not look at console there.</code></p>
<p><code>16:39</code><ajorg><code>thanks</code></p>
<p><code>16:40</code><smoser><code>actually.. yeah, BOOTHOOK does run, but doesnt seem to have stdout tied to same place as bootcmd</code></p>
<p><code>16:41</code><ajorg><code>oh?</code></p>
<p><code>16:41</code><ajorg><code>I'm slightly surprised it's not just me</code></p>
<p><code>16:42</code><smoser><code></code><a href="http://paste.ubuntu.com/25661714/"><code>http://paste.ubuntu.com/25661714/</code></a></p>
<p><code>16:42</code><rharper><code>it really should be in the journal/console if stdout is not redirected to a file, cloud-init-local service</code></p>
<p><code>16:43</code><smoser><code>that reproduces in lxc</code></p>
<p><code>16:44</code><rharper><code>smoser: in your  instance on serverstack, do you see your BOOTHOOK in journalctl -b -u cloud-init-local.service ?</code></p>
<p><code>16:44</code><smoser><code>ajorg, please go ahead and open a bug.</code></p>
<p><code>16:44</code><ajorg><code>cool (not cool :-P)</code></p>
<p><code>16:44</code><ajorg><code>will do</code></p>
<p><code>16:44</code><smoser><code># journalctl -b -u cloud-init.service | grep BOOT</code></p>
<p><code>16:44</code><smoser><code>Oct 02 16:37:41 a5 cloud-init[121]: BOOTCMD: Mon, 02 Oct 2017 16:37:41 +0000: a5</code></p>
<p><code>16:44</code><smoser><code>^ that is from lxd</code></p>
<p><code>16:45</code><rharper><code>and what about the welcome message from cloud-init ?</code></p>
<p><code>16:45</code><smoser><code>i think not.</code></p>
<p><code>16:45</code><rharper><code>bootcmd does:  util.subp(cmd, env=env, capture=False) ; where boot_hook does: util.subp([filepath], env=env)</code></p>
<p><code>16:46</code><smoser><code>yeah, so boot_hook definitely swallowed. and should not be.</code></p>
<p><code>16:47</code><rharper><code>yeah</code></p>
<p><code>16:49</code><ajorg><code></code><a href="https://bugs.launchpad.net/cloud-init/+bug/1720841"><code>https://bugs.launchpad.net/cloud-init/+bug/1720841</code></a></p>
<p><code>16:49</code><ubot5><code>Ubuntu bug 1720841 in cloud-init</code>“<code>Output`` ``from`` ``boothook`` ``is`` ``not`` ``logged</code>”<code>[Undecided,New]</code></p>
<p><code>16:50</code><ajorg><code>Meanwhile I need to setup more explicit logging from that boothook anyway, so I'm okay.</code></p>
<p><code>16:51</code><blackboxsw><code>#link</code><a href="https://bugs.launchpad.net/cloud-init/+bug/1720841"><code>https://bugs.launchpad.net/cloud-init/+bug/1720841</code></a></p>
<p><code>16:51</code><ubot5><code>Ubuntu bug 1720841 in cloud-init</code>“<code>Output`` ``from`` ``boothook`` ``is`` ``not`` ``logged</code>”<code>[Medium,Confirmed]</code></p>
<p><code>16:55</code><ajorg><code>Here's another one, which I've confirmed with a unit test and proposed a patch:</code><a href="https://bugs.launchpad.net/cloud-init/+bug/1720844"><code>https://bugs.launchpad.net/cloud-init/+bug/1720844</code></a></p>
<p><code>16:55</code><ubot5><code>Ubuntu bug 1720844 in cloud-init</code>“<code>UrlError`` ``from`` ``#include`` ``aborts`` ``stage</code>”<code>[Undecided,New]</code></p>
<p><code>16:55</code><ajorg><code>(what is this #link thing you're doing there?)</code></p>
<p><code>16:55</code><smoser><code>well, the bot is supposed to care and do somethign with it.</code></p>
<p><code>16:56</code><smoser><code>but /me thinks it doesnt work right :)</code></p>
<p><code>16:56</code><blackboxsw><code>ajorg: since meetingology is still active, the theory is it is keeping track of links  during this meeting</code></p>
<p><code>16:56</code><smoser><code>(during the meeting)</code></p>
<p><code>16:56</code><ajorg><code>ah, okay</code></p>
<p><code>16:57</code><ajorg><code>I think simpletable is completely ready to merge, btw. Any objections?</code><a href="https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525"><code>https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525</code></a></p>
<p><code>16:57</code><blackboxsw><code>The theory is it writes the meeting notes out for us so we can publish to</code><a href="https://cloud-init.github.io"><code>https://cloud-init.github.io</code></a></p>
<p><code>16:57</code><ajorg><code>#link</code><a href="https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525"><code>https://code.launchpad.net/~ajorgens/cloud-init/+git/cloud-init/+merge/330525</code></a><code>;-)</code></p>
<p><code>16:57</code><blackboxsw><code>geg</code></p>
<p><code>16:57</code><blackboxsw><code>heh</code></p>
<p><code>16:58</code><blackboxsw><code>ajorg: I think we were good on that changeset, and we only wanted to wait post 17.1 cut to avoid potential regression</code></p>
<p><code>16:59</code><ajorg><code>great</code></p>
<p><code>16:59</code><blackboxsw><code>I'm +1 on that will give it a spin today and then I think we can land it</code></p>
<p><code>17:01</code><smoser><code>blackboxsw, ajorg my thoughts on the simpletable...</code></p>
<p><code>17:01</code><ajorg><code>here it comes...</code></p>
<p><code>17:01</code><ajorg><code>:-P</code></p>
<p><code>17:01</code><blackboxsw><code>:)</code></p>
<p><code>17:02</code><smoser><code>i would like to have a machine friendly output available</code></p>
<p><code>17:02</code><smoser><code>human friendly is good, but machine friendly solves the actual goal of writing the stuff.</code></p>
<p><code>17:02</code><ajorg><code>So I modified it to display *exactly* as prettytable did</code></p>
<p><code>17:02</code><smoser><code>oh really.</code></p>
<p><code>17:02</code><smoser><code>wow</code></p>
<p><code>17:02</code><ajorg><code>which is admittedly not machine friendly</code></p>
<p><code>17:02</code><ajorg><code>not especially</code></p>
<p><code>17:02</code><smoser><code>then i guess i can't object at all.</code></p>
<p><code>17:02</code><ajorg><code>but it's at least as good as prettytable</code></p>
<p><code>17:03</code><smoser><code>in that its backwards compat</code></p>
<p><code>17:03</code><smoser><code>right.</code></p>
<p><code>17:03</code><ajorg><code>^ this was my goal, to get you to not object</code></p>
<p><code>17:03</code><smoser><code>i still think we should probaly additionally write some machine friendly json</code></p>
<p><code>17:03</code><ajorg><code>agreed, that would be better</code></p>
<p><code>17:03</code><smoser><code>i tihnk having something human friendly is good though</code></p>
<p><code>17:03</code><smoser><code>as i know *I* look at that output</code></p>
<p><code>17:04</code><ajorg><code>it meets my goal of not depending on prettytable</code></p>
<p><code>17:04</code><smoser><code>and parsing json would be less nice</code></p>
<p><code>17:04</code><smoser><code>yeah</code></p>
<p><code>17:05</code><smoser><code>so based on your assertion that it outputs the same as pretty table, i have no objections. only future hopes.</code></p>
<p><code>17:05</code><smoser><code>and i do agree dropping pretty table is nice</code></p>
<p><code>17:05</code><ajorg><code>winning</code></p>
<p><code>17:06</code><blackboxsw><code>smoser: yeah I was wondering how we generally expect people/machines to parse cloud-init-output.log. Right now it's kindof hard to do machine parsing of cloud-init-output.log.</code></p>
<p><code>17:07</code><smoser><code>blackboxsw, yeah. cloud-init-output.log is not intended to be machine friendly.</code></p>
<p><code>17:07</code><blackboxsw><code>do we know already of non-human consumers of the formatting in cloud-init.output.log?</code></p>
<p><code>17:07</code><smoser><code>but the console actually has value in having machien friendly things on it.</code></p>
<p><code>17:08</code><smoser><code>my feeling is if you have access to /var/log/cloud-init.log, then you could very easily have written whatever you wanted to another file that was purely machine friendly.</code></p>
<p><code>17:08</code><blackboxsw><code>was wondering where we would intend to dump machine-friendly json</code></p>
<p><code>17:08</code><blackboxsw><code>yeah</code></p>
<p><code>17:08</code><smoser><code>but the console (/dev/ttyS0) boot log is different</code></p>
<p><code>17:08</code><smoser><code>in that it can give you a couple things you'd not find easy access to</code></p>
<p><code>17:09</code><smoser><code>a.) ssh public keys for the system (providing out of band communication of this data)</code></p>
<p><code>17:09</code><smoser><code>b.) network configuration info: providn useful bits of data on how you might get to this system</code></p>
<p><code>17:10</code><smoser><code>systemd makes it</code>“<code>fun</code>”<code>to get that data to the console in a safe way</code></p>
<p><code>17:12</code><ajorg><code>ugh yes. systemd like to stomp all over your consoles.</code></p>
<p><code>17:19</code><blackboxsw><code>ok so did we want to iterate on simpletable to dump json, or just look for cloud-init to write supplementary json files under /run/cloud-init</code></p>
<p><code>17:20</code><blackboxsw><code>.. after we land ajorg's branch</code></p>
<p><code>17:21</code><ajorg><code>I think it's a good idea to dump json fragments to console for some things, but I suspect smoser will still not want to break anyone who might be using the tables, so probably best to land my branch as-is</code></p>
<p><code>17:23</code><smoser><code>yeah, i agree with ajorg. for now, we can just take a replacement that drops prettytable</code></p>
<p><code>17:23</code><smoser><code>there are improvments to be done there, but this is a simple win</code></p>
<p><code>17:29</code><smoser><code>we'll go ahead and end meeting here.</code></p>
<p><code>17:29</code><smoser><code>i'll still be around. thanks all!</code></p>
<p><code>17:29</code><smoser><code>#endmeeting</code></p>
<p>Generated by MeetBot 0.1.5 (http://wiki.ubuntu.com/meetingology)</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>



    <div class="addthis_relatedposts_inline">


</article>

    <footer>
<p>&copy;  </p>
<p>Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Cloud-init Info ",
  "url" : "https://cloud-init.github.io",
  "image": "/images/cloud-init-orange.svg",
  "description": "Cloud-init project updates and general information"
}
</script>

</body>
</html>