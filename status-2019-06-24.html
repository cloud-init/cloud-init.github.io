
<!DOCTYPE html>
<html lang="english">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://cloud-init.github.io/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://cloud-init.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Cloud-init Info Atom">


    <link rel="shortcut icon" href="/theme/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/theme/img/favicon.ico" type="image/x-icon">

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50554247-3', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#2c001e">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#2c001e">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#2c001e">

<meta name="author" content="chad.smith@canonical.com" />
<meta name="description" content="Meeting information #cloud-init: Cloud-init bi-weekly status, 24 Jun at 16:18 — 17:33 UTC Full logs at [[http://ubottu.com/meetingology/logs/cloud-init/2019/cloud-init.2019-06-24-16.18.log.html]] Meeting summary Previous Actions The discussion about &#34;Previous Actions&#34; started at 16:23. LINK: https://cloud-init.github.io/status-2019-06-10.html#status-2019-06-10 …" />
<meta name="keywords" content="">

<meta property="og:site_name" content="Cloud-init Info"/>
<meta property="og:title" content="Cloud-init bi-weekly status"/>
<meta property="og:description" content="Meeting information #cloud-init: Cloud-init bi-weekly status, 24 Jun at 16:18 — 17:33 UTC Full logs at [[http://ubottu.com/meetingology/logs/cloud-init/2019/cloud-init.2019-06-24-16.18.log.html]] Meeting summary Previous Actions The discussion about &#34;Previous Actions&#34; started at 16:23. LINK: https://cloud-init.github.io/status-2019-06-10.html#status-2019-06-10 …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://cloud-init.github.io/status-2019-06-24.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-06-24 16:18:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://cloud-init.github.io/author/chadsmithcanonicalcom.html">
<meta property="article:section" content="status-meeting-minutes"/>
<meta property="og:image" content="/images/cloud-init-orange.svg">

  <title>Cloud-init Info &ndash; Cloud-init bi-weekly status</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://cloud-init.github.io">
        <img src="/images/cloud-init-orange.svg" alt="Cloud-init" title="Cloud-init">
      </a>
      <h1><a href="https://cloud-init.github.io">Cloud-init</a></h1>

<p>Make your cloud images be all they can be</p>
      <nav>
        <ul class="list">

          <li><a href="https://cloudinit.readthedocs.org/" target="_blank">Docs</a></li>
          <li><a href="https://cloud-init.io" target="_blank">Overview</a></li>
          <li><a href="https://cloudinit.readthedocs.io/en/latest/topics/hacking.html" target="_blank">Hacking</a></li>
          <li><a href="https://jenkins.ubuntu.com/server/view/cloud-init/" target="_blank">CI builds</a></li>
          <li><a href="https://launchpad.net/cloud-init" target="_blank">Code</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/cloud-init" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-wechat" href="https://webchat.freenode.net/?channels=cloud-init" target="_blank"><i class="fa fa-wechat"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://cloud-init.github.io">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://cloud-init.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="status-2019-06-24">Cloud-init bi-weekly status</h1>
    <p>
      Posted on Mon 24 June 2019 in <a href="https://cloud-init.github.io/category/status-meeting-minutes.html">status-meeting-minutes</a>

        &#8226; 10 min read
    </p>
  </header>


  <div>
    <h2>Meeting information</h2>
<ul>
<li>#cloud-init: Cloud-init bi-weekly status, 24 Jun at 16:18 &mdash; 17:33 UTC</li>
<li>Full logs at [[<a href="http://ubottu.com/meetingology/logs/cloud-init/2019/cloud-init.2019-06-24-16.18.log.html">http://ubottu.com/meetingology/logs/cloud-init/2019/cloud-init.2019-06-24-16.18.log.html</a>]]</li>
</ul>
<h2>Meeting summary</h2>
<h3>Previous Actions</h3>
<p>The discussion about "Previous Actions" started at 16:23.</p>
<ul>
<li><strong>LINK</strong>: <a href="https://cloud-init.github.io/status-2019-06-10.html#status-2019-06-10">https://cloud-init.github.io/status-2019-06-10.html#status-2019-06-10</a> </li>
<li><strong>LINK</strong>: <a href="https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381">https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381</a> </li>
<li><strong>ACTION</strong>: Touch base with AnhVoMSFT by next status on priority of <a href="https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381">https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381</a></li>
</ul>
<h3>Recent Changes</h3>
<p>The discussion about "Recent Changes" started at 16:28.</p>
<h3>In Progress Development</h3>
<p>The discussion about "In Progress Development" started at 16:31.</p>
<ul>
<li><strong>LINK</strong>: <a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin">https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</a> </li>
<li><strong>LINK</strong>: <a href="https://code.launchpad.net/~raharper/cloud-init/+git/cloud-init/+ref/feature/disk_setup_async">https://code.launchpad.net/~raharper/cloud-init/+git/cloud-init/+ref/feature/disk_setup_async</a> is the WIP branch</li>
<li><strong>LINK</strong>: <a href="https://trello.com/c/TMK5ZDMf/1108-azure-async-disk-mounts">https://trello.com/c/TMK5ZDMf/1108-azure-async-disk-mounts</a> </li>
<li><strong>LINK</strong>: <a href="https://cloud-init.github.io">https://cloud-init.github.io</a> </li>
</ul>
<h2>Vote results</h2>
<h2>Action items, by person</h2>
<ul>
<li>AnhVoMSFT</li>
<li>Touch base with AnhVoMSFT by next status on priority of <a href="https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381">https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381</a></li>
</ul>
<h2>Done items</h2>
<ul>
<li>(none)</li>
</ul>
<h2>People present (lines said)</h2>
<ul>
<li>blackboxsw (73)</li>
<li>rharper (23)</li>
<li>AnhVoMSFT (18)</li>
<li>nik736 (12)</li>
<li>ubot5 (4)</li>
<li>meetingology (4)</li>
</ul>
<h2>Full Log</h2>
<p>16:18 <code>&lt;blackboxsw&gt;</code> #startmeeting Cloud-init bi-weekly status</p>
<p>16:18 <code>&lt;meetingology&gt;</code> Meeting started Mon Jun 24 16:18:34 2019 UTC.  The chair is blackboxsw. Information about MeetBot at <a href="http://wiki.ubuntu.com/meetingology.">http://wiki.ubuntu.com/meetingology.</a></p>
<p>16:18 <code>&lt;meetingology&gt;</code> </p>
<p>16:18 <code>&lt;meetingology&gt;</code> Available commands: action commands idea info link nick</p>
<p>16:19 <code>&lt;blackboxsw&gt;</code> welcome to another episode of cloud-init status updates.</p>
<p>16:20 <code>&lt;blackboxsw&gt;</code> Cloud-init upstream uses this meeting as a platform for community updates, feature/bug discussions, and an opportunity to get some extra input on current development.</p>
<p>16:21 <code>&lt;blackboxsw&gt;</code> our format is the following topics: Previous Actions, Recent Changes, In-progress Development, Office Hours</p>
<p>16:21 <code>&lt;blackboxsw&gt;</code> anyone is welcome to participate, interject, make suggestions or ask questions</p>
<p>16:22 <code>&lt;blackboxsw&gt;</code> generally we try to host this meeting every two weeks on the day listed in the channel topic</p>
<p>16:23 <code>&lt;blackboxsw&gt;</code> #topic Previous Actions</p>
<p>16:23 <code>&lt;blackboxsw&gt;</code> last meeting</p>
<p>16:23 <code>&lt;blackboxsw&gt;</code> #link <a href="https://cloud-init.github.io/status-2019-06-10.html#status-2019-06-10">https://cloud-init.github.io/status-2019-06-10.html#status-2019-06-10</a></p>
<p>16:24 <code>&lt;blackboxsw&gt;</code> we had an action to follow up on any bugs related to installing ifupdown on a system that had netplan installed by default.</p>
<p>16:24 <code>&lt;blackboxsw&gt;</code> I believe we did see a bug come in from Azure about that.... checking for that bug id now</p>
<p>16:25 <code>&lt;blackboxsw&gt;</code> #1832381</p>
<p>16:25 <code>&lt;rharper&gt;</code> bug #1832381</p>
<p>16:25 <code>&lt;ubot5&gt;</code> bug 1832381 in cloud-init (Ubuntu) "vm fails to boot due to conflicting network configuration when user switches from netplan to eni" [Undecided,Incomplete] <a href="https://launchpad.net/bugs/1832381">https://launchpad.net/bugs/1832381</a></p>
<p>16:25 <code>&lt;blackboxsw&gt;</code> #link <a href="https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381">https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381</a></p>
<p>16:25 <code>&lt;AnhVoMSFT&gt;</code> There is an action item on me to attach a log to that bug. Since the incident created by the customer was closed and we did not have permission to share his log, I will need to get a repro and retrieve the log. It's not very easy to trigger a mac address change in Azure these days</p>
<p>16:25 <code>&lt;blackboxsw&gt;</code> thanks AnhVoMSFT for this bug</p>
<p>16:27 <code>&lt;blackboxsw&gt;</code> ok if we carry over that action item then for next status meeting AnhVoMSFT (just to close the loop if it's important)</p>
<p>16:27 <code>&lt;AnhVoMSFT&gt;</code> yep - once I get some help from our networking folks to trigger a mac address change I'll update the bug with more logs</p>
<p>16:27 <code>&lt;blackboxsw&gt;</code> #action Touch base with AnhVoMSFT by next status on priority of <a href="https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381">https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381</a></p>
<p>16:27 * meetingology Touch base with AnhVoMSFT by next status on priority of <a href="https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381">https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1832381</a></p>
<p>16:27 <code>&lt;ubot5&gt;</code> Ubuntu bug 1832381 in cloud-init (Ubuntu) "vm fails to boot due to conflicting network configuration when user switches from netplan to eni" [Undecided,Incomplete]</p>
<p>16:28 <code>&lt;blackboxsw&gt;</code> good deal. that's all we had for actions from last meeting</p>
<p>16:28 <code>&lt;blackboxsw&gt;</code> #topic Recent Changes</p>
<p>16:29 <code>&lt;blackboxsw&gt;</code> the following items have landed on tip of cloud-init's master branch</p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> - sysconfig: support more bonding options [Penghui Liao]</p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> - cloud-init-generator: use libexec path to ds-identify on redhat systems</p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> [Ryan Harper] (<a href="[https://bugs.launchpad.net/bugs/1833264](https://bugs.launchpad.net/bugs/1833264)">LP: #1833264</a>)</p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> - tools/build-on-freebsd: update to python3 [Gonéri Le Bouder]</p>
<p>16:30 <code>&lt;ubot5&gt;</code> Ubuntu bug 1833264 in cloud-init "cloud-init-generator hardcodes path to ds-identify" [Undecided,Fix committed]</p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> thanks to Penghui and Gonéri for driving additional changes for cloud-init in this last sessions</p>
<p>16:30 <code>&lt;blackboxsw&gt;</code> session*</p>
<p>16:31 <code>&lt;blackboxsw&gt;</code> #topic In Progress Development</p>
<p>16:32 <code>&lt;blackboxsw&gt;</code> there a number of longer items for feature work  in progress that should see some light soon</p>
<p>16:33 <code>&lt;blackboxsw&gt;</code> We track these features in trello as always</p>
<p>16:33 <code>&lt;blackboxsw&gt;</code> #link <a href="https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin">https://trello.com/b/hFtWKUn3/daily-cloud-init-curtin</a></p>
<p>16:33 <code>&lt;blackboxsw&gt;</code> minor fixup for Azure instance-data.json (cloud-init query) for region and availability zone should land today</p>
<p>16:34 <code>&lt;blackboxsw&gt;</code> rharper: and blackboxsw  are working on Azure-related route tables and async disk mount features</p>
<p>16:36 <code>&lt;AnhVoMSFT&gt;</code> is there any bug/discussion item for the async disk mount?</p>
<p>16:37 <code>&lt;blackboxsw&gt;</code> AnhVoMSFT: rharper has been testing out systemd unit magic for setting up disk mounts async and initial numbers look good. How to bake that work into cloud-init is the next small hurdle I think. (I thought he mentioned today in our standup a 50% speed increase due to  async mounts instead of sync waits)</p>
<p>16:38 <code>&lt;rharper&gt;</code> <a href="https://code.launchpad.net/~raharper/cloud-init/+git/cloud-init/+ref/feature/disk_setup_async">https://code.launchpad.net/~raharper/cloud-init/+git/cloud-init/+ref/feature/disk_setup_async</a>  is the WIP branch</p>
<p>16:39 <code>&lt;blackboxsw&gt;</code> AnhVoMSFT: I expect we'll have something in the next couple of days.</p>
<p>16:39 <code>&lt;blackboxsw&gt;</code> orrr right now. thanx rharper</p>
<p>16:39 <code>&lt;AnhVoMSFT&gt;</code> that sounds really cool. I'll check it out</p>
<p>16:39 * blackboxsw creates a trello card that can be watched for this feature</p>
<p>16:40 <code>&lt;blackboxsw&gt;</code> #link <a href="https://trello.com/c/TMK5ZDMf/1108-azure-async-disk-mounts">https://trello.com/c/TMK5ZDMf/1108-azure-async-disk-mounts</a></p>
<p>16:41 <code>&lt;blackboxsw&gt;</code> feel free to subscribe to any trello cards folks see that are of interest. you will get an email if the card changes state, like from Doing to Done or if new links are added</p>
<p>16:42 <code>&lt;blackboxsw&gt;</code> Odd_Bloke: rharper process question</p>
<p>16:42 <code>&lt;blackboxsw&gt;</code> what do you guys think about us turning on voting on trello cards</p>
<p>16:42 <code>&lt;blackboxsw&gt;</code> people with interest on a feature/card in our backlog could upvote it and that <em>could</em> help drive what features we grab over time</p>
<p>16:43 <code>&lt;blackboxsw&gt;</code> dunno, thought it might be something we could toss around to see if that would make sense. the board it public after all</p>
<p>16:43 <code>&lt;blackboxsw&gt;</code> <em>is public</em> rather</p>
<p>16:43 <code>&lt;rharper&gt;</code> maybe; I worry about random +1 without any more context.  Platform developers already work with us; and community folks file bugs/merge proposals</p>
<p>16:44 <code>&lt;blackboxsw&gt;</code> good point.</p>
<p>16:44 <code>&lt;rharper&gt;</code> I'm open to the idea</p>
<p>16:45 <code>&lt;blackboxsw&gt;</code> for sure, if it gets interest, we can think about adding that feature. can't hurt to have some additional input, unfounded though it may be.</p>
<p>16:45 <code>&lt;AnhVoMSFT&gt;</code> agreed on the usefulness might be limited. You guys are already talking to each other. Platform developers either engage directly on this board or through out of band channel (sync meeting with Canonical product groups, etc...)</p>
<p>16:46 <code>&lt;AnhVoMSFT&gt;</code> Perhaps you can try it out for a couple release periods and see how it works out</p>
<p>16:46 <code>&lt;blackboxsw&gt;</code> yeah, /me just likes all the shiny objects pretty icons ;)  ... need to control myself</p>
<p>16:47 <code>&lt;blackboxsw&gt;</code> thx AnhVoMSFT +1.</p>
<p>16:48 <code>&lt;blackboxsw&gt;</code> so I think that about wraps in-progress development. I know paride has been tirelessly working on our CI infrastructure to improve quality of CI and false positives for failures due to resource constraints. So big thanks for paride working on our jenkins workers</p>
<p>16:48 <code>&lt;blackboxsw&gt;</code> #topic Office Hours (next ~30 mins)</p>
<p>16:49 <code>&lt;blackboxsw&gt;</code> This is an open topic to bring any cloud-init discussions, bugs, concerns or feature requests folks have.</p>
<p>16:49 <code>&lt;blackboxsw&gt;</code> In the absence of such topics we spend part of this time grooming the review queue to get back to dev</p>
<p>16:50 <code>&lt;blackboxsw&gt;</code> contributors so that they don't have stale branches waiting for input</p>
<p>16:50 <code>&lt;AnhVoMSFT&gt;</code> We had a review sent out to add some boot time telemetry collection as part of cloud-init analyze: <a href="https://code.launchpad.net/~samgilson/cloud-init/+git/cloud-init/+merge/368943">https://code.launchpad.net/~samgilson/cloud-init/+git/cloud-init/+merge/368943</a></p>
<p>16:50 <code>&lt;blackboxsw&gt;</code> thanks AnhVoMSFT I'll grab a review slot on that one now</p>
<p>16:51 <code>&lt;AnhVoMSFT&gt;</code> would appreciate some reviews there and also on ideas on how to retrieve similar timestamps for FreeBSD</p>
<p>16:51 <code>&lt;rharper&gt;</code> AnhVoMSFT: yes, will review</p>
<p>16:51 <code>&lt;rharper&gt;</code> AnhVoMSFT: also, I filed a bug related to the azure telemetry, lemme get it</p>
<p>16:51 <code>&lt;blackboxsw&gt;</code> I'll kick off a CI run on that now</p>
<p>16:51 <code>&lt;blackboxsw&gt;</code> rharper: ^</p>
<p>16:52 <code>&lt;rharper&gt;</code> Bug 1833731</p>
<p>16:52 <code>&lt;ubot5&gt;</code> bug 1833731 in cloud-init "cloud-init analyze output not formatted cleanly on Azure" [Undecided,New] <a href="https://launchpad.net/bugs/1833731">https://launchpad.net/bugs/1833731</a></p>
<p>16:52 <code>&lt;rharper&gt;</code> AnhVoMSFT: not sure if the branch for review addresses the formatting of the output, but we should take a look to clean it up</p>
<p>16:52 <code>&lt;AnhVoMSFT&gt;</code> is there a good way to subscribe to new bugs with a certain keyword/tags? I.e., I would like to auto-subscribe to all bugs that has "Azure" in the bug title</p>
<p>16:52 <code>&lt;blackboxsw&gt;</code> rharper: if you get a chance to double check <a href="https://code.launchpad.net/~chad.smith/cloud-init/+git/cloud-init/+merge/369199">https://code.launchpad.net/~chad.smith/cloud-init/+git/cloud-init/+merge/369199</a> we might be able to land that too</p>
<p>16:53 <code>&lt;rharper&gt;</code> blackboxsw: I asked you some questions, if you've replied, I'll look again</p>
<p>16:53 <code>&lt;blackboxsw&gt;</code> rharper: nevermind, I see you already looked at it</p>
<p>16:53 <code>&lt;rharper&gt;</code> ah</p>
<p>16:53 <code>&lt;rharper&gt;</code> perfect</p>
<p>16:53 <code>&lt;blackboxsw&gt;</code> thanks</p>
<p>16:53 <code>&lt;rharper&gt;</code> I think we're mostly fine; just a question on return values</p>
<p>16:53 * blackboxsw needed to refresh</p>
<p>16:54 <code>&lt;AnhVoMSFT&gt;</code> rharper I will take a look at the analyze output and see how we can improve it. If it is a minor change we can add it to the existing review</p>
<p>16:54 <code>&lt;rharper&gt;</code> AnhVoMSFT: no need to pull it into the existing stuff</p>
<p>16:55 <code>&lt;rharper&gt;</code> I'd prefer a separate targetted fix; which may land independently from the boot stage (which is super interesting on its own)</p>
<p>16:55 <code>&lt;AnhVoMSFT&gt;</code> cool - we will do a separate fix then</p>
<p>16:55 <code>&lt;blackboxsw&gt;</code> rharper: yeah that concern is clear, we are safe on the processing of region/az in absence of 'imds' key</p>
<p>16:55 <code>&lt;blackboxsw&gt;</code> it'll return none</p>
<p>16:57 <code>&lt;blackboxsw&gt;</code> by virtue of that last get('location|platformFaultDomain')</p>
<p>16:57 <code>&lt;blackboxsw&gt;</code> if either is absent due to any key above being absent, you'll get None as default value</p>
<p>16:58 <code>&lt;rharper&gt;</code> blackboxsw: ack</p>
<p>17:00 <code>&lt;nik736&gt;</code> Hi there, not sure if this is the right place to ask, but I have problems when creating a new VM, it only happens with the debian cloud image, ubuntu is fine. Booting is stuck at the drm line, the exact line is dependent on the video model type in my libvirt xml but it is basically stuck for 20-30sec and won't continue.  It will boot eventually after that time. Thanks so much for any hints. Happy to provide</p>
<p>17:00 <code>&lt;nik736&gt;</code> further details.</p>
<p>17:02 <code>&lt;blackboxsw&gt;</code> hrm, video model timeouts are a bit out of my wheelhouse :/</p>
<p>17:02 * blackboxsw pokes around a bit in google</p>
<p>17:02 <code>&lt;nik736&gt;</code> it seems to be that the lines after it would be about resizing the file system. I am not really sure if this is cloud-init related at all and I am not sure if it actually is caused by the video model or is just taking a bit to get to the next steps</p>
<p>17:03 <code>&lt;blackboxsw&gt;</code> nik736: you can run cloud-init analyze show   or cloud-init analyze blame to see what cloud-init says it is spending a lot of time on</p>
<p>17:03 <code>&lt;nik736&gt;</code> I tried different host systems, Debian 18.04, 19.04, Debian 9, different libvirt versions, different qemu versions, nothing seems to be helping lol</p>
<p>17:03 <code>&lt;blackboxsw&gt;</code> (If you have cloud-init v 18 or later in your image I think)</p>
<p>17:04 <code>&lt;nik736&gt;</code> ah, ok, thanks, I will look into that</p>
<p>17:04 <code>&lt;blackboxsw&gt;</code> nik736: also systemd-analyze blame is a good helper for what is killing boot time</p>
<p>17:04 <code>&lt;AnhVoMSFT&gt;</code> do you see any timestamp gap that reflects the 20-30s in cloud-init.log ?</p>
<p>17:08 <code>&lt;rharper&gt;</code> nik736: feel free to file  a bug and attach logs from the 'cloud-init collect-logs' output (or serial console if available) and /var/log/cloud-init.log if you can get into the instance afterwards</p>
<p>17:08 <code>&lt;nik736&gt;</code> thanks for the help, currently looking into it</p>
<p>17:11 <code>&lt;AnhVoMSFT&gt;</code> rharper blackboxsw we have some instance deployment where cloud-init is hanging at the command ip route add - any idea how to look further?</p>
<p>17:12 <code>&lt;AnhVoMSFT&gt;</code> this does look like a platform problem, so it is more of a question related to networking, rather than cloud-init itself</p>
<p>17:14 <code>&lt;AnhVoMSFT&gt;</code> it's super hard to reproduce so the only thing we have so far to work with is logs. I thought the call to ip route add basically adds an entry to the kernel routing table. Is there an interaction with networking involved which might cause it to hang?</p>
<p>17:14 <code>&lt;rharper&gt;</code> AnhVoMSFT: I wonder if it's creating a route that breaks connection to IMDS or something else that cloud-init would then do an HTTP get on ?</p>
<p>17:17 <code>&lt;nik736&gt;</code> I saw in the log that 2 entries are around 1 minute apart "SUCCESS: searching for local datasources" and "Cloud-init v. 0.7.9 running 'init' at Mon, 24 Jun 2019 17:13:41 +0000. Up 73.67 seconds." I am not sure if this could be it or if this looks fine</p>
<p>17:18 <code>&lt;rharper&gt;</code> 0.7.9 is quite old, seeing the full cloud-init.log will be most useful for us to understand what's happening</p>
<p>17:19 <code>&lt;nik736&gt;</code> okay, sec</p>
<p>17:19 <code>&lt;AnhVoMSFT&gt;</code> rharper that is a good theory. I do see in a good case there's a call to IMDS immediately after that, although that call has a timeout. If it fails we should see more logs coming out of cloud-init. I'll look further into that todya</p>
<p>17:20 <code>&lt;nik736&gt;</code> @rharper <a href="https://pastebin.com/fzCSH5kC">https://pastebin.com/fzCSH5kC</a></p>
<p>17:20 <code>&lt;rharper&gt;</code> AnhVoMSFT: the retry logic in DataSourceAzure is quite long IIRC, so it's quite possible this is the very issue that blackboxsw is working w.r.t ensuring the instances always have a source-ip route to the IMDS</p>
<p>17:21 <code>&lt;AnhVoMSFT&gt;</code> rharper indeed it is long, and the log was overly suppressed to avoid log from growing too large while VM was waiting in pre-provisioning state. We are adding back some of the logs (in a smarter way to get enough details while avoiding huge log size)</p>
<p>17:22 <code>&lt;rharper&gt;</code> nik736: so, between line 260 and 261 there's a large timedelta; that's <em>outside</em> of cloud-init;  cloud-init is executed separately 4 times (cloud-init init --local, cloud-init init, cloud-init config --modules, cloud-init config --final)</p>
<p>17:23 <code>&lt;rharper&gt;</code> nik736: so if you have a systemd journal, we could see what happens between the end of cloud-init-local.service and cloud-init.service (stage1 and 2);</p>
<p>17:23 <code>&lt;nik736&gt;</code> ah, okay, interesting</p>
<p>17:23 <code>&lt;nik736&gt;</code> will check</p>
<p>17:23 <code>&lt;rharper&gt;</code> or syslog might see stuff between those two time points</p>
<p>17:23 * rharper steps away for a bit, please keep sending info here; I'll respond when I;m back</p>
<p>17:24 <code>&lt;AnhVoMSFT&gt;</code> nik736 systemd-analyze critical-chain cloud-init.service might help here - I think some systemd service is running right after init-local and just before init and that service is taking time</p>
<p>17:25 <code>&lt;nik736&gt;</code> will check, thanks for your help, really appreciate it.</p>
<p>17:32 <code>&lt;blackboxsw&gt;</code> I think I'll wrap the meeting here, but we can continue the conversation. Thanks again folks for the discussions</p>
<p>17:33 <code>&lt;blackboxsw&gt;</code> next meeting will be July 8th</p>
<p>17:33 <code>&lt;blackboxsw&gt;</code> as updated in the topic</p>
<p>17:33 <code>&lt;blackboxsw&gt;</code> meeting minutes will be posted to</p>
<p>17:33 <code>&lt;blackboxsw&gt;</code> #link <a href="https://cloud-init.github.io">https://cloud-init.github.io</a></p>
<p>17:33 <code>&lt;blackboxsw&gt;</code> #endmeeting</p>
<p>Generated by MeetBot 0.1.5 (<a href="http://wiki.ubuntu.com/meetingology">http://wiki.ubuntu.com/meetingology</a>)</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>



    <div class="addthis_relatedposts_inline">


</article>

    <footer>
<p>&copy;  </p>
<p>Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Cloud-init Info ",
  "url" : "https://cloud-init.github.io",
  "image": "/images/cloud-init-orange.svg",
  "description": "Cloud-init project updates and general information"
}
</script>

</body>
</html>